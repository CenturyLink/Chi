import{r as t,h as i,g as e}from"./p-99c091ba.js";import{c as s}from"./p-834de5c7.js";import{E as c,b as h}from"./p-3c5e39a4.js";import{f as o}from"./p-e680f502.js";import{v as n}from"./p-d1e6806c.js";const d=class{constructor(i){t(this,i),this.disabled=!1,this.displaySeconds=!1,this.format="12hr",this.active=!1}_onFocusIn(t){t.target!==document.body&&null!==t.target&&(this.active=s(this.el,t.target))}_onClick(t){t.target!==document.body&&null!==t.target&&(this.active=s(this.el,t.target))}_isEscapeKey(t){return"key"in t&&("Escape"===t.key||"Esc"===t.key||t.key===c)}_onKeyUp(t){this._isEscapeKey(t)&&(this.active=!1,this._input.blur())}timeChanged(t,i){!!t!=!!i&&(this.value=t)}async setTime(t){this.value=t}getTime(){return Promise.resolve(this.value)}componentWillLoad(){this._onFocusIn=this._onFocusIn.bind(this),this._onClick=this._onClick.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._uuid=this.el.id?this.el.id:`tp-${n()}`}componentDidLoad(){document.body.addEventListener("focusin",this._onFocusIn),document.body.addEventListener("click",this._onClick),document.body.addEventListener("keyup",this._onKeyUp)}disconnectedCallback(){document.body.removeEventListener("focusin",this._onFocusIn),document.body.removeEventListener("click",this._onClick),document.body.removeEventListener("keyup",this._onKeyUp)}handlePopoverOpen(t){t.stopPropagation();const i=this.el.querySelector(`.${o.HOURS}`),e=this.el.querySelector(`.${o.MINUTES}`),s=this.el.querySelector(`.${o.SECONDS}`);setTimeout((()=>{if(i){const t=i.querySelector(`.${o.HOUR}.-active`);t&&(i.scrollTop=t.offsetTop-4)}if(e){const t=e.querySelector(`.${o.MINUTE}.-active`);t&&(e.scrollTop=t.offsetTop-4)}if(s){const t=s.querySelector(`.${o.SECOND}.-active`);t&&(s.scrollTop=t.offsetTop-4)}}),h)}handleTimeChange(t){const i=document.getElementById(`${this._uuid}-control`),e=t=>String(t).length>1?String(t):`0${t}`,s="24hr"!==this.format&&t.detail.hour>12?t.detail.hour-12:t.detail.hour,c=this.displaySeconds?`:${e(t.detail.second)}`:"",h="12hr"===this.format?e(t.detail.period):"";i.value=`${e(s)}:${e(t.detail.minute)}${c} ${h}`}render(){const t=i("chi-popover",{key:"10f1cc7b196d4cb2ddf1e26d2c68405701790cf6",id:`popover-${this._uuid}`,position:"bottom",reference:`#${this._uuid}-control`,"prevent-auto-hide":!0,active:this.active},i("chi-time",{key:"685d7766c8c474cea71d0305e6f9d963e00877e5","display-seconds":this.displaySeconds,"excluded-hours":this._excludedHours,"excluded-minutes":this._excludedMinutes,"excluded-seconds":this._excludedSeconds,format:this.format,value:this.value,"seconds-step":this.secondsStep,"minutes-step":this.minutesStep}));return i("div",{key:"4eb6d4eb59deca4705d830c8d643e057f416a0c2",class:this.disabled?"-disabled":""},i("div",{key:"46d6e9b8cd9a8aea95067faaf3df1d05864d479c",class:"chi-input__wrapper -icon--right"},i("input",{key:"2ebf7792ab2965aa5a914469fc8acc8e450a9589",id:`${this._uuid}-control`,class:"chi-input\n              "+(this.active?"-focus":""),type:"text",placeholder:"12hr"===this.format?"--:-- --":"--:--",ref:t=>this._input=t,value:this.value,disabled:this.disabled}),i("chi-icon",{key:"036eec31b5ebd650b09c213c5e8a58e1153f2df4",icon:"circle-clock-outline"})),!this.disabled&&t)}get el(){return e(this)}static get watchers(){return{value:["timeChanged"]}}};export{d as chi_time_picker}