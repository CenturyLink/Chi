import{r as t,h as i,g as s}from"./p-99c091ba.js";import{c as e}from"./p-834de5c7.js";import{E as c,b as h}from"./p-914f348a.js";import{f as o}from"./p-0a178b06.js";import{v as n}from"./p-d1e6806c.js";const d=class{constructor(i){t(this,i),this.disabled=!1,this.displaySeconds=!1,this.format="12hr",this.active=!1}_onFocusIn(t){t.target!==document.body&&null!==t.target&&(this.active=e(this.el,t.target))}_onClick(t){t.target!==document.body&&null!==t.target&&(this.active=e(this.el,t.target))}_isEscapeKey(t){return"key"in t&&("Escape"===t.key||"Esc"===t.key||t.key===c)}_onKeyUp(t){this._isEscapeKey(t)&&(this.active=!1,this._input.blur())}timeChanged(t,i){!!t!=!!i&&(this.value=t)}async setTime(t){this.value=t}getTime(){return Promise.resolve(this.value)}componentWillLoad(){this._onFocusIn=this._onFocusIn.bind(this),this._onClick=this._onClick.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._uuid=this.el.id?this.el.id:`tp-${n()}`}componentDidLoad(){document.body.addEventListener("focusin",this._onFocusIn),document.body.addEventListener("click",this._onClick),document.body.addEventListener("keyup",this._onKeyUp)}disconnectedCallback(){document.body.removeEventListener("focusin",this._onFocusIn),document.body.removeEventListener("click",this._onClick),document.body.removeEventListener("keyup",this._onKeyUp)}handlePopoverOpen(t){t.stopPropagation();const i=this.el.querySelector(`.${o.HOURS}`),s=this.el.querySelector(`.${o.MINUTES}`),e=this.el.querySelector(`.${o.SECONDS}`);setTimeout((()=>{if(i){const t=i.querySelector(`.${o.HOUR}.-active`);t&&(i.scrollTop=t.offsetTop-4)}if(s){const t=s.querySelector(`.${o.MINUTE}.-active`);t&&(s.scrollTop=t.offsetTop-4)}if(e){const t=e.querySelector(`.${o.SECOND}.-active`);t&&(e.scrollTop=t.offsetTop-4)}}),h)}handleTimeChange(t){const i=document.getElementById(`${this._uuid}-control`),s=t=>String(t).length>1?String(t):`0${t}`,e="24hr"!==this.format&&t.detail.hour>12?t.detail.hour-12:t.detail.hour,c=this.displaySeconds?`:${s(t.detail.second)}`:"",h="12hr"===this.format?s(t.detail.period):"";i.value=`${s(e)}:${s(t.detail.minute)}${c} ${h}`}render(){const t=i("chi-popover",{key:"26d9f7d750f02863d7271a463d199f9055585082",id:`popover-${this._uuid}`,position:"bottom",reference:`#${this._uuid}-control`,"prevent-auto-hide":!0,active:this.active},i("chi-time",{key:"9289d58f72f2fbfbd45a957438f0ff02d0327be3","display-seconds":this.displaySeconds,"excluded-hours":this._excludedHours,"excluded-minutes":this._excludedMinutes,"excluded-seconds":this._excludedSeconds,format:this.format,value:this.value,"seconds-step":this.secondsStep,"minutes-step":this.minutesStep}));return i("div",{key:"ec63612c5c01e9617318ba1e818931e4a35ae22b",class:this.disabled?"-disabled":""},i("div",{key:"86ca7f2d8281229b7d3394f67b7eb5a632e8ce27",class:"chi-input__wrapper -icon--right"},i("input",{key:"8de1cfb6d63f9729df39cb12ffef18320fc42db1",id:`${this._uuid}-control`,class:"chi-input\n              "+(this.active?"-focus":""),type:"text",placeholder:"12hr"===this.format?"--:-- --":"--:--",ref:t=>this._input=t,value:this.value,disabled:this.disabled}),i("chi-icon",{key:"d410db1bca22264c109d279980401f49eb7d12fa",icon:"circle-clock-outline"})),!this.disabled&&t)}get el(){return s(this)}static get watchers(){return{value:["timeChanged"]}}};export{d as chi_time_picker}