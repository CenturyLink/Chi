import{r as t,h as i,g as s}from"./p-0c0cd099.js";import{a as e}from"./p-d5dd2498.js";import{E as c,b as h}from"./p-baae1ad7.js";import{d as o}from"./p-ed8c4a28.js";import{v as a}from"./p-699f21d6.js";const n=class{constructor(i){t(this,i),this.value=void 0,this.disabled=!1,this.displaySeconds=!1,this._excludedHours=void 0,this._excludedMinutes=void 0,this._excludedSeconds=void 0,this.format="12hr",this.active=!1,this.minutesStep=void 0,this.secondsStep=void 0}_onFocusIn(t){t.target!==document.body&&null!==t.target&&(this.active=e(this.el,t.target))}_onClick(t){t.target!==document.body&&null!==t.target&&(this.active=e(this.el,t.target))}_isEscapeKey(t){return"key"in t&&("Escape"===t.key||"Esc"===t.key||t.key===c)}_onKeyUp(t){this._isEscapeKey(t)&&(this.active=!1,this._input.blur())}timeChanged(t,i){!!t!=!!i&&(this.value=t)}async setTime(t){this.value=t}getTime(){return Promise.resolve(this.value)}componentWillLoad(){this._onFocusIn=this._onFocusIn.bind(this),this._onClick=this._onClick.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._uuid=this.el.id?this.el.id:`tp-${a()}`}componentDidLoad(){document.body.addEventListener("focusin",this._onFocusIn),document.body.addEventListener("click",this._onClick),document.body.addEventListener("keyup",this._onKeyUp)}disconnectedCallback(){document.body.removeEventListener("focusin",this._onFocusIn),document.body.removeEventListener("click",this._onClick),document.body.removeEventListener("keyup",this._onKeyUp)}handlePopoverOpen(t){t.stopPropagation();const i=this.el.querySelector(`.${o.HOURS}`),s=this.el.querySelector(`.${o.MINUTES}`),e=this.el.querySelector(`.${o.SECONDS}`);setTimeout((()=>{if(i){const t=i.querySelector(`.${o.HOUR}.-active`);t&&(i.scrollTop=t.offsetTop-4)}if(s){const t=s.querySelector(`.${o.MINUTE}.-active`);t&&(s.scrollTop=t.offsetTop-4)}if(e){const t=e.querySelector(`.${o.SECOND}.-active`);t&&(e.scrollTop=t.offsetTop-4)}}),h)}handleTimeChange(t){const i=document.getElementById(`${this._uuid}-control`),s=t=>String(t).length>1?String(t):`0${t}`,e="24hr"!==this.format&&t.detail.hour>12?t.detail.hour-12:t.detail.hour,c=this.displaySeconds?`:${s(t.detail.second)}`:"",h="12hr"===this.format?s(t.detail.period):"";i.value=`${s(e)}:${s(t.detail.minute)}${c} ${h}`}render(){const t=i("chi-popover",{key:"10a8d08251e7687609d0cbb13d9e7fe62ceca0b5",id:`popover-${this._uuid}`,position:"bottom",reference:`#${this._uuid}-control`,"prevent-auto-hide":!0,active:this.active},i("chi-time",{key:"155ee779c75796489810a3407c66b16c2d60faaa","display-seconds":this.displaySeconds,"excluded-hours":this._excludedHours,"excluded-minutes":this._excludedMinutes,"excluded-seconds":this._excludedSeconds,format:this.format,value:this.value,"seconds-step":this.secondsStep,"minutes-step":this.minutesStep}));return i("div",{key:"ca8600cf33ebaead86239ac3ce0305dff171ecfe",class:this.disabled?"-disabled":""},i("div",{key:"2baa11e6148a55bfc2773867a5274335efb577ec",class:"chi-input__wrapper -icon--right"},i("input",{key:"d2a138bca73ce8bba7009fca92da73e0b0928bd0",id:`${this._uuid}-control`,class:"chi-input\n              "+(this.active?"-focus":""),type:"text",placeholder:"12hr"===this.format?"--:-- --":"--:--",ref:t=>this._input=t,value:this.value,disabled:this.disabled}),i("chi-icon",{key:"b1f8b9557b9e660040715cf70b7a4d780b19a593",icon:"circle-clock-outline"})),!this.disabled&&t)}get el(){return s(this)}static get watchers(){return{value:["timeChanged"]}}};export{n as chi_time_picker}