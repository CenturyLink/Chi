import{r as t,c as i,h as s,F as h,g as e}from"./p-0c0cd099.js";import{c as o}from"./p-1ef4f618.js";import{C as n}from"./p-1ad0e10c.js";import{n as a}from"./p-ed8c4a28.js";import{b as r}from"./p-d5dd2498.js";import{v as l}from"./p-699f21d6.js";import{I as c}from"./p-680f4200.js";import{h as d,c as u}from"./p-baae1ad7.js";import{a as p}from"./p-9cb46040.js";const v=class{constructor(s){t(this,s),this.eventChange=i(this,"chiChange",7),this.eventInput=i(this,"chiInput",7),this.eventFocus=i(this,"chiFocus",7),this.eventBlur=i(this,"chiBlur",7),this.eventClean=i(this,"chiClean",7),this.eventSearch=i(this,"chiSearch",7),this.eventItemSelected=i(this,"chiSearchInputItemSelected",7),this._handleSelectItem=(t,i)=>{t.preventDefault();const s=this._getAutocompleteDropdown(),h=t.target.innerText,{href:e,id:o}=null!=i?i:{};this.selectedItem=r({title:h,href:e,id:o}),this.value=h,s.hide(),this._clearFilterMenuItems(),this.eventItemSelected.emit(this.selectedItem)},this._clearInputField=()=>{this.readonly||this._cleanInput()},this.size="md",this.placeholder=void 0,this.value="",this.name=void 0,this.disabled=!1,this.preventValueMutation=!1,this.readonly=!1,this._status=void 0,this.mode=void 0,this.visibleItems=void 0,this.menuItems=void 0,this.state=void 0,this.helperMessage=void 0,this._cleanButtonVisible=!(!this.value||this.disabled),this.menuItemsFiltered=[],this.selectedItem=void 0}sizeValidation(t){const i=o.join(", ");if(t&&!o.includes(t))throw new Error(`${t} is not a valid size for input. If provided, valid values are: ${i}. `)}updateValue(t,i){this._cleanButtonVisible=!!t,t!==i&&(this.value=t)}stateValidation(t){const i=n.join(", ");if(t&&!n.includes(t))throw new Error(`${t} is not a valid state for input. If provided, valid values are: ${i}. `)}async showList(){const t=this._getAutocompleteDropdown(),i=this.el.querySelector("input[type=search]");null==t||t.show(),null==i||i.focus()}async hideList(){const t=this._getAutocompleteDropdown();null==t||t.hide()}connectedCallback(){this.menuItemsFiltered=this.menuItems}componentWillLoad(){this.sizeValidation(this.size),this.stateValidation(this.state)}_handleValueInput(t){const i=t.target.value,s=this._isAutocomplete();i||this._resetSelection(),this.preventValueMutation||(this.value=i),this._cleanButtonVisible=!!i,this.eventInput.emit(i),s&&this._handleFilter(i)}_setHighlightedValue(t,i){return i?t.map((t=>{const s=new RegExp(i,"gi"),h=t.title.replace(s,(t=>`<span class="-text--normal">${t}</span>`));return Object.assign(Object.assign({},t),{title:`<strong>${h}</strong>`})})):t}_clearFilterMenuItems(){this._isAutocomplete()&&(this.menuItemsFiltered=this.menuItems)}_getAutocompleteDropdown(){return this.el.querySelector("#dropdown-autocomplete")}_handleFilter(t){var i;const s=this._getAutocompleteDropdown(),h=null===(i=this.menuItems)||void 0===i?void 0:i.filter((i=>i.title.toLowerCase().includes(t.toLowerCase())));if(!(null==h?void 0:h.length))return void s.hide();const e=this._setHighlightedValue(h,t);this.menuItemsFiltered=e,s.show()}_handleValueChange(t){this.eventChange.emit(t.target.value)}_handleFocus(t){this._isAutocomplete()&&this._handleFilter(t.target.value),this.eventFocus.emit()}_isAutocomplete(){return"autocomplete"===this.mode}_cleanInput(){const t=this.el.querySelector("input[type=search]");this.value="",t.value=this.value,this._clearFilterMenuItems(),t.focus(),this._cleanButtonVisible=!1,this.eventClean.emit(),this._resetSelection()}_resetSelection(){if(!this._isAutocomplete())return;const t=this._getAutocompleteDropdown();this.selectedItem=void 0,t.resetSelection()}_dropdownAutocomplete(t){var i,h;const e=null!==(i=this.visibleItems)&&void 0!==i?i:null;return s("chi-dropdown",{id:"dropdown-autocomplete",position:"bottom",preventItemSelected:!0,fluid:!0,visibleItems:e},t,null===(h=this.menuItemsFiltered)||void 0===h?void 0:h.map((t=>{const i=l();return s("a",{key:`menu-item-${i}`,class:a.MENU_ITEM,href:t.href,slot:"menu",innerHTML:t.title,onClick:i=>this._handleSelectItem(i,t)})})))}_getHelperMessage(){return this.helperMessage&&s("chi-helper-message",{state:this.state},this.helperMessage)}_addHelperMessage(t){return s(h,null,t,this._getHelperMessage())}render(){const t=this._isAutocomplete(),i=s("input",{key:"3d563e22ada6ec28dfa35ca1ee534f9278e57a92",type:"search",class:`\n          chi-input chi-search__input\n          ${this.size?`-${this.size}`:""}\n          ${this.state?`-${this.state}`:""}\n          ${this._status?`-${this._status}`:""}\n        `,placeholder:this.placeholder||"",value:this.value,name:this.name||"",disabled:this.disabled,id:this.el.id?`${this.el.id}-control`:null,onFocus:t=>this._handleFocus(t),onBlur:()=>this.eventBlur.emit(),onInput:t=>this._handleValueInput(t),onChange:t=>this._handleValueChange(t),autocomplete:"off","aria-label":"search input",readonly:this.readonly}),h=this._cleanButtonVisible?s("button",{class:"chi-button -icon -close -xs",onClick:this._clearInputField,"aria-label":"Clear"},s("div",{class:"chi-button__content"},s("i",{class:"chi-icon icon-x","aria-hidden":"true"}))):null,e=s("button",{key:"fdfca1aadefa4ebbe46395e435d45fc63657b7b4",class:`\n        chi-button -icon -flat -bg--none\n        ${this.size?`-${this.size}`:""}\n        `,onClick:()=>this.eventSearch.emit(this.value),"aria-label":"Search"},s("div",{key:"2aa85a7c02558675df534dda150891162ad77e3a",class:"chi-button__content"},s("i",{key:"06e222e78de86b74bd6035996b8a9f49c2f74e35",class:"chi-icon icon-search","aria-hidden":"true"}))),o=s("div",{key:"6c1875682bd7db4bfdc0dec3ee5e6fb689553188",class:"chi-input__wrapper -icon--right",slot:"trigger"},i,h,e);let n=t?this._dropdownAutocomplete(o):o;return this.helperMessage&&(n=this._addHelperMessage(n)),n}get el(){return e(this)}static get watchers(){return{size:["sizeValidation"],value:["updateValue"],state:["stateValidation"]}}};v.style="chi-search-input.sc-chi-search-input-h{display:block;width:100%}";const f=class{constructor(s){t(this,s),this.eventChange=i(this,"chiChange",7),this.eventInput=i(this,"chiInput",7),this.eventFocus=i(this,"chiFocus",7),this.eventBlur=i(this,"chiBlur",7),this.type="text",this.state=void 0,this.iconLeft=void 0,this.iconRight=void 0,this.iconLeftColor=void 0,this.iconRightColor=void 0,this.size="md",this.placeholder=void 0,this.helperMessage=void 0,this.value="",this.name=void 0,this.disabled=!1,this.readonly=!1,this.preventValueMutation=!1,this.spinner=!1,this.copyText=!1,this._status=void 0,this.extraClass=void 0}stateValidation(t){const i=n.join(", ");if(t&&!n.includes(t))throw new Error(`${t} is not a valid state for input. If provided, valid values are: ${i}. `)}sizeValidation(t){const i=o.join(", ");if(t&&!o.includes(t))throw new Error(`${t} is not a valid size for input. If provided, valid values are: ${i}. `)}colorValidation(t){const i=c.join(", ");if(t&&!c.includes(t))throw new Error(`${t} is not a valid color for icon. If provided, valid values are: ${i}. `)}iconLeftColorValidation(t){this.colorValidation(t)}iconRightColorValidation(t){this.colorValidation(t)}typeValidation(t){const i=d.join(", ");if(t&&!d.includes(t))throw new Error(`${t} is not a valid type for input. If provided, valid values are: ${i}. `)}_handleValueInput(t){const i=t.target.value;this.preventValueMutation||(this.value=i),this.eventInput.emit(i)}_handleValueChange(t){this.eventChange.emit(t.target.value)}componentWillLoad(){this.stateValidation(this.state),this.iconLeftColorValidation(this.iconLeftColor),this.iconRightColorValidation(this.iconRightColor),this.sizeValidation(this.size),this.typeValidation(this.type)}connectedCallback(){p.call(this)}getInput(){return s("input",{type:this.type,class:`chi-input\n          ${this.state?`-${this.state}`:""}\n          ${this.size?`-${this.size}`:""}\n          ${this._status?`-${this._status}`:""}\n          ${this.extraClass?this.extraClass:""}\n        `,placeholder:this.placeholder||"",value:this.value,name:this.name||"",disabled:this.disabled,readonly:this.readonly,id:this.el.id?`${this.el.id}-control`:null,onFocus:()=>this.eventFocus.emit(),onBlur:()=>this.eventBlur.emit(),onInput:t=>this._handleValueInput(t),onChange:t=>this._handleValueChange(t)})}_getIconLeft(){return this.iconLeft&&s("chi-icon",{color:this.iconLeftColor||null,icon:this.iconLeft})}_getIconRight(){return this.iconRight&&!this.spinner&&s("chi-icon",{color:this.iconRightColor||null,icon:this.iconRight})}_getSpinner(){var t;return this.spinner&&s("chi-spinner",{size:null!==(t={sm:"xs",md:"sm",lg:"sm--2",xl:"sm--3"}[this.size])&&void 0!==t?t:"sm"})}_getHelperMessage(){return this.helperMessage&&s("chi-helper-message",{state:this.state},this.helperMessage)}_shouldWrapInput(){return Boolean(this.iconLeft||this.iconRight||this.spinner||this.helperMessage||this.copyText)}_addCopyText(t){return s("div",{class:`${u.FLEX} ${u.ALIGN_ITEMS_CENTER}`},t,s("chi-copy-text",{text:this.value,disabled:this.disabled,size:{xs:"xs",sm:"xs",md:"sm",lg:"sm--2",xl:"sm--3"}[this.size]}))}_addHelperMessage(t){return s(h,null,t,this._getHelperMessage())}_getWrappedInput(t){const i=["chi-input__wrapper",this.iconLeft&&"-icon--left",this.iconRight&&"-icon--right",this.copyText&&"-flex--grow1"].filter(Boolean).join(" ");return t=s("div",{class:i},t,this._getIconLeft(),this._getIconRight(),this._getSpinner()),this.copyText&&(t=this._addCopyText(t)),this.helperMessage&&(t=this._addHelperMessage(t)),t}render(){let t=this.getInput();return this._shouldWrapInput()&&(t=this._getWrappedInput(t)),t}get el(){return e(this)}static get watchers(){return{state:["stateValidation"],size:["sizeValidation"],iconLeftColor:["iconLeftColorValidation"],iconRightColor:["iconRightColorValidation"],type:["typeValidation"]}}};f.style="chi-text-input.sc-chi-text-input-h{display:block;width:100%}";export{v as chi_search_input,f as chi_text_input}