var t;!function(t){t[t.Initialized=0]="Initialized",t[t.Preparing=1]="Preparing",t[t.Prepared=2]="Prepared",t[t.Starting=3]="Starting",t[t.Started=4]="Started",t[t.Stopping=5]="Stopping",t[t.Stopped=6]="Stopped"}(t||(t={}));class i{constructor(i,s,h,r){this.forceStopped=!1,this.prepareFunction=i,this.startFunction=s,this.endFunction=h,this.animationDuration=r,this.status=t.Initialized}prepare(){this.status=t.Preparing,this.prepareAnimationFrame=window.requestAnimationFrame((()=>{this.status===t.Preparing&&(this.prepareFunction(),this.status=t.Prepared,this.startAnimationFrame=window.requestAnimationFrame((()=>{this.start()})))}))}start(){this.status===t.Prepared&&(this.status=t.Starting,this.startFunction(),this.status=t.Started,this.endTimeout=window.setTimeout((()=>{this.end()}),this.animationDuration))}stop(){this.isStopped()||(window.cancelAnimationFrame(this.prepareAnimationFrame),window.cancelAnimationFrame(this.startAnimationFrame),window.clearTimeout(this.endTimeout),this.status=t.Stopped,this.forceStopped=!0)}end(){this.isStopped()||(this.status=t.Stopping,this.endFunction(),this.status=t.Stopped)}getState(){return this.status}isStopped(){return this.status===t.Stopped}wasForceStopped(){return this.forceStopped}static animationFactory(t,s,h,r){const n=new i(t,s,h,r);return n.prepare(),n}}export{i as T}