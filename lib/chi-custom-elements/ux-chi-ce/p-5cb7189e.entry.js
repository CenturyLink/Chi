import{r as t,h as i,g as s}from"./p-f7c555a7.js";import{c as e}from"./p-834de5c7.js";import{E as c,b as h}from"./p-3c5e39a4.js";import{d as o}from"./p-70488c96.js";import{v as n}from"./p-d1e6806c.js";const a=class{constructor(i){t(this,i),this.value=void 0,this.disabled=!1,this.displaySeconds=!1,this._excludedHours=void 0,this._excludedMinutes=void 0,this._excludedSeconds=void 0,this.format="12hr",this.active=!1,this.minutesStep=void 0,this.secondsStep=void 0}_onFocusIn(t){t.target!==document.body&&null!==t.target&&(this.active=e(this.el,t.target))}_onClick(t){t.target!==document.body&&null!==t.target&&(this.active=e(this.el,t.target))}_isEscapeKey(t){return"key"in t&&("Escape"===t.key||"Esc"===t.key||t.key===c)}_onKeyUp(t){this._isEscapeKey(t)&&(this.active=!1,this._input.blur())}timeChanged(t,i){!!t!=!!i&&(this.value=t)}async setTime(t){this.value=t}getTime(){return Promise.resolve(this.value)}componentWillLoad(){this._onFocusIn=this._onFocusIn.bind(this),this._onClick=this._onClick.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._uuid=this.el.id?this.el.id:`tp-${n()}`}componentDidLoad(){document.body.addEventListener("focusin",this._onFocusIn),document.body.addEventListener("click",this._onClick),document.body.addEventListener("keyup",this._onKeyUp)}disconnectedCallback(){document.body.removeEventListener("focusin",this._onFocusIn),document.body.removeEventListener("click",this._onClick),document.body.removeEventListener("keyup",this._onKeyUp)}handlePopoverOpen(t){t.stopPropagation();const i=this.el.querySelector(`.${o.HOURS}`),s=this.el.querySelector(`.${o.MINUTES}`),e=this.el.querySelector(`.${o.SECONDS}`);setTimeout((()=>{if(i){const t=i.querySelector(`.${o.HOUR}.-active`);t&&(i.scrollTop=t.offsetTop-4)}if(s){const t=s.querySelector(`.${o.MINUTE}.-active`);t&&(s.scrollTop=t.offsetTop-4)}if(e){const t=e.querySelector(`.${o.SECOND}.-active`);t&&(e.scrollTop=t.offsetTop-4)}}),h)}handleTimeChange(t){const i=document.getElementById(`${this._uuid}-control`),s=t=>String(t).length>1?String(t):`0${t}`,e="24hr"!==this.format&&t.detail.hour>12?t.detail.hour-12:t.detail.hour,c=this.displaySeconds?`:${s(t.detail.second)}`:"",h="12hr"===this.format?s(t.detail.period):"";i.value=`${s(e)}:${s(t.detail.minute)}${c} ${h}`}render(){const t=i("chi-popover",{key:"4e6b62e3cac614e82a6bbd3ac015f033202fe6f2",id:`popover-${this._uuid}`,position:"bottom",reference:`#${this._uuid}-control`,"prevent-auto-hide":!0,active:this.active},i("chi-time",{key:"684a2814efcaf4255ba07742af4e9b3b5dbaef72","display-seconds":this.displaySeconds,"excluded-hours":this._excludedHours,"excluded-minutes":this._excludedMinutes,"excluded-seconds":this._excludedSeconds,format:this.format,value:this.value,"seconds-step":this.secondsStep,"minutes-step":this.minutesStep}));return i("div",{key:"c4a7cfe21119aedb33f4fac064349b987dba6045",class:this.disabled?"-disabled":""},i("div",{key:"901c7e426a856fa6095876f496e5676de074ec98",class:"chi-input__wrapper -icon--right"},i("input",{key:"bade73cd8c1082516eb9caa0f3725550112dd4fb",id:`${this._uuid}-control`,class:"chi-input\n              "+(this.active?"-focus":""),type:"text",placeholder:"12hr"===this.format?"--:-- --":"--:--",ref:t=>this._input=t,value:this.value,disabled:this.disabled}),i("chi-icon",{key:"f0fc7e7bde70fb8475a552342553718c30832962",icon:"circle-clock-outline"})),!this.disabled&&t)}get el(){return s(this)}static get watchers(){return{value:["timeChanged"]}}};export{a as chi_time_picker}