import{r as s,c as t,h as i,g as h}from"./p-0c0cd099.js";import{U as a,M as e,N as o,c as l,i as c,j as n,B as r,k as d,l as g,m,a as p}from"./p-ed8c4a28.js";import{j as $}from"./p-d5dd2498.js";import{T as b}from"./p-68882606.js";import{M as u,A as f}from"./p-baae1ad7.js";import{v as C}from"./p-699f21d6.js";const{MARGIN:v,TYPOGRAPHY:M}=a,k=class{constructor(h){s(this,h),this.chiModalShow=t(this,"chiModalShow",7),this.chiModalShown=t(this,"chiModalShown",7),this.chiModalHide=t(this,"chiModalHide",7),this.chiModalHidden=t(this,"chiModalHidden",7),this.chiModalBack=t(this,"chiModalBack",7),this.chiModalAccept=t(this,"chiModalAccept",7),this.chiModalCancel=t(this,"chiModalCancel",7),this.isActive=!1,this._uuid4=C(),this.getUpdateAnimationClasses=(s,t)=>{const i=[`${p} ${s}`,p],h=[p,`${p} ${t}`];return this.isActive||(i.reverse(),h.reverse()),[i,h]},this.getCloseButton=()=>i("chi-button",{type:"close",class:a.DISPLAY.FLEX,"data-dismiss":"modal","aria-label":"Close",onClick:()=>this.cancel()}),this.cancel=()=>{this.hide(),this.chiModalCancel.emit()},this.accept=()=>{this.hide(),this.chiModalAccept.emit()},this.getAlertContent=()=>i("div",{class:a.DISPLAY.FLEX},i("chi-icon",{icon:"circle-x",size:"sm--3",color:"danger",class:v.RIGHT[2]}),i("div",{class:a.SIZING.W100},i("p",{class:`${M.TEXT_BOLD} ${v[0]}`},i("slot",{name:"alert-subhead"},"Subhead")),i("slot",{name:"content"},i("p",{class:`${v.TOP[1]} ${v.BOTTOM[0]}`},u)))),this.getSimpleContent=()=>i("div",null,i("h2",{class:`${M.TEXT_H3} ${M.TEXT_BOLDER} ${v[0]}`},this.modalTitle),i("slot",{name:"content"},i("p",{class:`${M.TEXT} ${a.PADDING.Y[1]} ${a.PADDING.X[3]}`},u)),i("slot",{name:"footer"},i("chi-button",{color:"primary",size:"lg",class:v.TOP[1],onClick:()=>this.accept()},"Action"))),this.getDefaultContent=()=>i("slot",{name:"content"},i("p",{class:`${M.TEXT} ${v[0]}`},u)),this.getFooter=()=>i("footer",{class:`${e.FOOTER} ${this.noBorder?o:""}`},i("slot",{name:"footer"},i("chi-button",{"data-dismiss":"modal",onClick:()=>this.cancel()},"Cancel"),i("chi-button",{color:"primary",onClick:()=>this.accept()},"Save"))),this.modalTitle="Modal title",this.subtitle="",this.button="",this.center=!1,this.scrollable=void 0,this.inverse=!1,this.multiStep=!1,this.animated=!1,this.noBorder=!1,this.simple=!1,this.target=void 0,this.alert=!1,this.sectionAnimationClasses=void 0,this.backdropAnimationClasses=void 0}sectionAnimationClassesChanged(){this.isActive=this.sectionAnimationClasses.includes(l)}scrollableValidation(s){if(s&&!["400","480","long-content"].includes(s))throw new Error(`${s} is not a valid type for scrollable. Valid values are 400, 480 and long-content`)}triggerValidation(){const s=[this.button,this.target,this.el.querySelector('[slot="trigger"]')].filter(Boolean).length;if(0===s)throw new Error(`No trigger detected. Please provide one trigger. Modal ID is ${this._uuid4}.`);if(s>1)throw new Error(`Multiple triggers detected. Please provide only one trigger. Modal ID is ${this._uuid4}.`)}componentDidLoad(){const s=this.target||this.el.querySelector('[slot="trigger"]');s&&s.addEventListener("click",(()=>this.toggle()))}componentWillLoad(){this.triggerValidation(),this.scrollableValidation(this.scrollable),this.sectionAnimationClasses="",this.backdropAnimationClasses=c}updateAnimationClasses(s,t){this.sectionAnimationClasses=s,this.backdropAnimationClasses=t}handleAnimation(s,t,i){if(this._animation&&!this._animation.isStopped()&&this._animation.stop(),this.animated){const[h,a]=this.getUpdateAnimationClasses(s,t);this._animation=b.animationFactory((()=>this.updateAnimationClasses(h[0],h[1])),(()=>this.updateAnimationClasses(a[0],a[1])),i,f.MEDIUM)}else i()}async show(){this.chiModalShow.emit(),this.handleAnimation(c,l,(()=>{this.updateAnimationClasses(l,""),this.chiModalShown.emit()}))}async hide(){this.chiModalHide.emit(),this.handleAnimation(l,c,(()=>{this.updateAnimationClasses("",c),this.chiModalHidden.emit()}))}async toggle(){this.isActive?await this.hide():await this.show()}getContent(){const s=$([e.CONTENT,this.simple&&`${M.TEXT_CENTER} ${a.PADDING[6]}`,["400","480"].includes(this.scrollable)&&a.SIZING[`MAX_H${this.scrollable}`]]);return i("div",{class:s},this.alert&&this.getAlertContent(),this.simple&&this.getSimpleContent(),!this.simple&&!this.alert&&this.getDefaultContent())}getHeader(){const s=i("button",{onClick:()=>this.chiModalBack.emit(),class:e.BACK,"aria-label":"Back"});return i("header",{class:`${e.HEADER} ${this.noBorder?o:""}`},i("h2",{class:`${e.TITLE} ${this.multiStep?n:""}`},this.modalTitle),this.subtitle&&i("h3",{class:e.SUBTITLE},this.subtitle),this.multiStep&&s,this.getCloseButton())}getTrigger(){return i("slot",{name:"trigger"},i("chi-button",{id:`modal-trigger-${this._uuid4}`,class:e.TRIGGER,"data-target":`#${this._uuid4}`,onClick:()=>this.toggle()},this.button))}getBackdropClasses(){return $([r.BACKDROP,this.backdropAnimationClasses,"long-content"===this.scrollable&&a.SIZING.MAX_H480,this.center&&d,this.inverse&&g,this.animated&&m])}getSectionClasses(){return $([e.MODAL,this.sectionAnimationClasses,this.animated&&m])}render(){const s={id:this._uuid4,class:this.getSectionClasses(),role:"dialog","aria-label":"Modal description","aria-modal":"true"};return i("div",{key:"e9278dcde5332d2f0b91816599736a78fb397d2e"},!this.target&&this.getTrigger(),i("div",{key:"36d0be566c4c447cae6746d17d0c1db04ccb7885",class:this.getBackdropClasses()},i("div",{key:"d622920538fee029429f13227cac45277d4757e9",class:r.WRAPPER},i("section",Object.assign({key:"9221796ccb0f4f84932160d13fc0251c42adb858"},s),!this.simple&&this.getHeader(),this.simple&&this.getCloseButton(),this.getContent(),!this.simple&&this.getFooter()))))}get el(){return h(this)}static get watchers(){return{sectionAnimationClasses:["sectionAnimationClassesChanged"],scrollable:["scrollableValidation"]}}};export{k as chi_modal}