import{r as t,c as i,h as s,g as h}from"./p-99c091ba.js";import{M as e,N as a,b as o,o as r,U as n,B as l,p as c,q as d,r as g,d as m}from"./p-c6d5045e.js";import{j as p}from"./p-834de5c7.js";import{T as u}from"./p-68882606.js";import{M as $,g as C,A as b}from"./p-914f348a.js";import{v as f}from"./p-d1e6806c.js";const{TYPOGRAPHY:v}=n,M=class{constructor(h){t(this,h),this.chiModalShow=i(this,"chiModalShow",7),this.chiModalShown=i(this,"chiModalShown",7),this.chiModalHide=i(this,"chiModalHide",7),this.chiModalHidden=i(this,"chiModalHidden",7),this.chiModalAccept=i(this,"chiModalAccept",7),this.chiModalCancel=i(this,"chiModalCancel",7),this.subtitle="",this.active=!1,this.button="",this.center=!1,this.closable=!0,this.inverse=!1,this.animated=!0,this.noBorder=!1,this.simple=!1,this.isActive=this.active,this._uuid4=f(),this.getUpdateAnimationClasses=(t,i)=>{const s=[`${m} ${t}`,m],h=[m,`${m} ${i}`];return this.isActive||(s.reverse(),h.reverse()),[s,h]},this.getCloseButton=()=>s("chi-button",{type:"close",class:n.DISPLAY.FLEX,"data-dismiss":"modal","aria-label":"Close",onClick:()=>this.cancel()}),this.cancel=()=>{this.hide(),this.chiModalCancel.emit()},this.accept=()=>{this.hide(),this.chiModalAccept.emit()},this.getFooter=()=>s("footer",{class:`${e.FOOTER} ${this.noBorder?a:""}`},s("slot",{name:"footer"},s("chi-button",{"data-dismiss":"modal",onClick:()=>this.cancel()},"Cancel"),s("chi-button",{color:"primary",onClick:()=>this.accept()},"Save")))}sectionAnimationClassesChanged(){this.isActive=this.sectionAnimationClasses.includes(o)}contentHeightValidation(t){this.validateScrollValue(t,"content-height")}backdropHeightValidation(t){this.validateScrollValue(t,"backdrop-height")}triggerValidation(){const t=[this.button,this.reference,this.el.querySelector('[slot="trigger"]')].filter(Boolean).length;if(0===t)throw new Error(`No trigger detected. Please provide one trigger. Modal ID is ${this._uuid4}.`);if(t>1)throw new Error(`Multiple triggers detected. Please provide only one trigger. Modal ID is ${this._uuid4}.`)}validateScrollValue(t,i){if(void 0!==t&&t%8!=0)throw this.el.removeAttribute(i),new Error(`${t} is not a valid value for ${i}. Values must be multiples of 8.`)}connectedCallback(){this.el.hasAttribute("content-height")&&(this.contentHeight=this.contentHeight||$),this.el.hasAttribute("backdrop-height")&&(this.backdropHeight=this.backdropHeight||C)}componentDidLoad(){this._referenceElement=this.reference&&document.getElementById(this.reference);const t=this._referenceElement||this.el.querySelector('[slot="trigger"]');t&&t.addEventListener("click",(()=>this.toggle()))}componentWillLoad(){this.triggerValidation(),this.contentHeightValidation(this.contentHeight),this.backdropHeightValidation(this.backdropHeight),this.sectionAnimationClasses=this.isActive?o:"",this.backdropAnimationClasses=this.isActive?"":r}updateAnimationClasses(t,i){this.sectionAnimationClasses=t,this.backdropAnimationClasses=i}handleAnimation(t,i,s){if(this._animation&&!this._animation.isStopped()&&this._animation.stop(),this.animated){const[h,e]=this.getUpdateAnimationClasses(t,i);this._animation=u.animationFactory((()=>this.updateAnimationClasses(h[0],h[1])),(()=>this.updateAnimationClasses(e[0],e[1])),s,b.MEDIUM)}else s()}async show(){this.chiModalShow.emit(),this.handleAnimation(r,o,(()=>{this.updateAnimationClasses(o,""),this.chiModalShown.emit()}))}async hide(){this.chiModalHide.emit(),this.handleAnimation(o,r,(()=>{this.updateAnimationClasses("",r),this.chiModalHidden.emit()}))}async toggle(){this.isActive?await this.hide():await this.show()}getContent(){const t=p([e.CONTENT,this.simple&&`${v.TEXT_CENTER} ${n.PADDING[6]}`]);return s("div",{class:t,style:this.contentHeight?{maxHeight:`${this.contentHeight}px`}:void 0},s("slot",null))}getHeader(){if(!this.simple&&Boolean(this.modalTitle||this.subtitle||this.closable))return s("header",{class:`${e.HEADER} ${this.noBorder?a:""}`},s("h2",{class:e.TITLE},this.modalTitle),this.subtitle&&s("h3",{class:e.SUBTITLE},this.subtitle),this.closable&&this.getCloseButton())}getTrigger(){return s("slot",{name:"trigger"},s("chi-button",{id:`modal-trigger-${this._uuid4}`,class:e.TRIGGER,"data-target":`#${this._uuid4}`,onClick:()=>this.toggle()},this.button))}getBackdropClasses(){return p([l.BACKDROP,this.backdropAnimationClasses,this.center&&c,this.inverse&&d,this.animated&&g])}getSectionClasses(){return p([e.MODAL,this.sectionAnimationClasses,this.animated&&g])}getModal(){const t={id:this._uuid4,class:this.getSectionClasses(),role:"dialog","aria-label":"Modal description","aria-modal":"true"},i=this.backdropHeight?{maxHeight:`${this.backdropHeight}px`}:void 0;return s("div",{class:this.getBackdropClasses(),style:i},s("div",{class:l.WRAPPER},s("section",Object.assign({},t),this.simple&&this.closable&&this.getCloseButton(),this.getHeader(),this.getContent(),!this.simple&&this.getFooter())))}render(){return this.reference?this.getModal():s("div",null,this.getTrigger(),this.getModal())}get el(){return h(this)}static get watchers(){return{sectionAnimationClasses:["sectionAnimationClassesChanged"],contentHeight:["contentHeightValidation"],backdropHeight:["backdropHeightValidation"]}}};export{M as chi_modal}