import{r as t,c as s,h as i,g as h}from"./p-f7c555a7.js";import{a as e,S as o,b as n,c as a,U as r}from"./p-70488c96.js";import{C as c,a as l,A as u}from"./p-3c5e39a4.js";import{T as d}from"./p-68882606.js";const v=class{constructor(i){t(this,i),this.chiViewChange=s(this,"chiViewChange",7),this.scrollBreakpoints={0:25},this.isDragging=!1,this.currentStep=0,this.remainingSpace=0,this.isLastView=!1,this.isLastStep=!1,this.restItemsShown=0,this.resizeHandler=()=>{this._calculateCarouselWidth()},this.touchEnd=()=>{this.isDragging&&(this.isDragging=!1,this.wrapper.style.transform=this.getWrapperTransform())},this.touchMove=t=>{if(this.isDragging){const s=this.getPositionX(t),i=this.scrollBreakpoints[this.view+1],h=this.getMoveDelta(),e=this.isMoveToNext()?i-h:i+h;this.moveEndPosition=s,this.wrapper.style.transform=`translateX(${e}px)`,h>c&&(this.isMoveToNext()?this.nextView():this.prevView(),this.isDragging=!1)}},this.touchStart=t=>{this.moveStartPosition=this.getPositionX(t),this.isDragging=!0},this.getPositionX=t=>t.touches[0].clientX,this.dots=void 0,this.autoplay=void 0,this.interval=5,this.pagination=void 0,this.noButtonControllers=!1,this.single=void 0,this.view=0,this.numberOfViews=0,this.maxItemsShown=void 0,this.customPrevButton=void 0,this.customNextButton=void 0,this.autoplayInterval=void 0,this.transformX=0}_calculateCarouselWidth(){const t=this._getCarouselItems();this.fullScrollLength=this.el.offsetWidth||this.fullScrollLength,this.single&&(this._applySizeToItems(),this.transformX=-this.currentStep*t[0].offsetWidth);const s=this.fullScrollLength/t[0].offsetWidth;this.maxItemsShown=s%1>.95?Math.ceil(s):Math.floor(s),this.numberOfViews=Math.ceil(t.length/this.maxItemsShown),this.restItemsShown=t.length%this.maxItemsShown,this.isLastView&&this._calculateView(l.NEXT,this.currentStep)}connectedCallback(){this.customPrevButton=!!this.el.querySelector('[slot="previous"]'),this.customNextButton=!!this.el.querySelector('[slot="next"]')}componentDidLoad(){this._calculateCarouselWidth(),this._autoPlay(!1),window.addEventListener("resize",this.resizeHandler)}componentWillOnload(){window.removeEventListener("resize",this.resizeHandler)}_autoPlay(t){!this.autoplay||this.autoplayInterval||t?(window.clearInterval(this.autoplayInterval),this.autoplayInterval=null):this.autoplayInterval=window.setInterval((()=>{this.view===this.numberOfViews-1&&this._goToView(-1),this._goToView(++this.view)}),1e3*this.interval)}_calculateView(t,s){const i=this._getCarouselItems(),h=i[0].offsetWidth;let e=void 0!==s?s:this.maxItemsShown*-t+this.currentStep;const o=i.length-e,n=this.isLastView;this.isLastView=o<=this.maxItemsShown,this.isLastStep=o<=0,e<0&&(e=0),this.isLastStep&&t===l.NEXT||(this.isLastView?this._moveLastView(s,o,h):0===e?this.transformX=0:this._moveView(s,h,e,t,n),e>=0&&(this.currentStep=Math.abs(e)))}_moveView(t,s,i,h,e){if(t)this.transformX=t*s*-1;else{const t=this._getGap();this.transformX+=e?this.remainingSpace:(Math.abs(i-this.currentStep)*s+t*this.maxItemsShown)*h}}_moveLastView(t,s,i){const h=this._getGap(),e=this.maxItemsShown+s;this.remainingSpace=Math.abs(this.fullScrollLength-e*i-h*e-h/3),t?this.transformX=this.fullScrollLength-(t+s)*i:this.transformX-=this.remainingSpace}_bounceView(t){this.isLastStep?this.transformX+=25*t:this.transformX=25*t,setTimeout((()=>{this.transformX-=25*t}),200)}prevView(){this._calculateView(l.PREVIOUS),this.animation&&!this.animation.isStopped()&&this.animation.stop(),this.view>=-1&&(this.animation=d.animationFactory((()=>{this._animationClasses=`${e}`}),(()=>{this.view>=0&&(this.view=this.view-1)}),(()=>{-1===this.view?this.view=0:(this._animationClasses="",this.chiViewChange.emit(this.view))}),u.SHORT)),(0===this.currentStep||this.isLastStep)&&this._bounceView(l.PREVIOUS)}nextView(){this._calculateView(l.NEXT),this.animation&&!this.animation.isStopped()&&this.animation.stop(),this.animation=d.animationFactory((()=>{this._animationClasses=`${e}`}),(()=>{this.view<this.numberOfViews&&(this.view=this.view+1)}),(()=>{this.view===this.numberOfViews?this.view=this.numberOfViews-1:(this.chiViewChange.emit(this.view),this._animationClasses="")}),u.SHORT),(0===this.currentStep||this.isLastStep)&&this._bounceView(l.NEXT)}isMoveToNext(){return this.moveStartPosition>this.moveEndPosition}getMoveDelta(){return Math.abs(this.moveEndPosition-this.moveStartPosition)}getWrapperTransform(){return`translateX(${this.transformX}px)`}_applySizeToItems(){const t=this._getCarouselItems();t&&t.forEach((t=>{t.style.width=`${this.fullScrollLength}px`}))}_goToView(t){const s=this.maxItemsShown*t;this._calculateView(s>this.currentStep?l.NEXT:l.PREVIOUS,s),this.view=t,this.chiViewChange.emit(t)}_getCarouselItems(){return this.el.querySelectorAll([n.ITEM,o.ITEM].map((t=>`.${t}`)).join(", "))}_areThereMultipleItems(){return this._getCarouselItems().length>1}_getItemVisibility(t){let s=this.view*this.maxItemsShown;const i=s+this.maxItemsShown;return this.isLastView&&this.restItemsShown>0&&(s-=this.maxItemsShown-this.restItemsShown),t>=s&&t<i}setVisibleClass(){this._getCarouselItems().forEach(((t,s)=>{const i=this._getItemVisibility(s);t.classList.toggle("-visible",i)}))}_getStatComponent(){return this.el.querySelector(`.${o.STAT}`)}_getGap(){const t=this._getStatComponent();if(t){const s=window.getComputedStyle(t);return parseInt(s.gap,10)}return 0}render(){this.setVisibleClass();const t=this._areThereMultipleItems()&&!this.noButtonControllers&&i("div",{class:`${n.CONTROL} ${n.PREVIOUS}`,onClick:()=>this.prevView()},this.customPrevButton?i("slot",{name:"previous"}):i("chi-button",{size:"sm",type:"float","alternative-text":"Carousel previous",disabled:this.currentStep<=0},i("chi-icon",{icon:"chevron-left"}))),s=this._areThereMultipleItems()&&!this.noButtonControllers&&i("div",{class:`${n.CONTROL} ${n.NEXT}`,onClick:()=>this.nextView()},this.customNextButton?i("slot",{name:"next"}):i("chi-button",{size:"sm",type:"float","alternative-text":"Carousel next",disabled:this.isLastView},i("chi-icon",{icon:"chevron-right"}))),h=i("slot",{name:"items"}),e=this.dots?i("div",{class:n.DOTS},Array(this.numberOfViews).fill(0).map(((t,s)=>i("span",{onClick:()=>{this._goToView(s)},class:`\n              ${n.DOT}\n              ${this.view===s||-1===this.view&&0===s||this.view===this.numberOfViews&&s===this.numberOfViews-1?a:""}`})))):null,o=this.pagination?i("div",{class:n.PAGINATION},0===this.view||-1===this.view?1:this.view+1>this.numberOfViews?this.numberOfViews:this.view+1," ","of ",this.numberOfViews):null;return i("div",{onTouchStart:this.touchStart,onTouchEnd:this.touchEnd,onTouchMove:this.touchMove,onMouseEnter:()=>this._autoPlay(!0),onMouseLeave:()=>this._autoPlay(!1),class:`\n        ${n.CAROUSEL}\n        ${this.dots?n.DOTS_ADDITION:""}\n        ${this.pagination?n.PAGINATION_ADDITION:""}`},i("div",{class:n.CONTENT},i("div",{class:`\n            ${n.WRAPPER}\n            ${this._animationClasses}\n            ${this.single?r.DISPLAY.FLEX:""}\n          `,style:{transform:this.getWrapperTransform()},ref:t=>this.wrapper=t},h)),t,s,e,o)}get el(){return h(this)}};v.style="chi-carousel.sc-chi-carousel-h{display:block;width:100%}";export{v as chi_carousel}