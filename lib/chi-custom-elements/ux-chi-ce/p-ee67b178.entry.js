import{r as t,c as s,h as i,g as h}from"./p-99c091ba.js";import{f as e,U as n,b as r,D as a}from"./p-c6d5045e.js";import{j as o,k as c}from"./p-914f348a.js";const d=class{constructor(i){t(this,i),this.eventChange=s(this,"chiTimeChange",7),this.displaySeconds=!1,this.format="12hr",this.excludedHoursArray=[],this.excludedMinutesArray=[],this.excludedSecondsArray=[],this.minutesToDisplay=[],this.secondsToDisplay=[]}componentWillLoad(){this.updateTimeSteps(),this.validateTimeSteps(),this.selectTimeAndPeriod(),this.updateExcluded(),this.updateValue()}validateTimeSteps(){if(this.minutesStep&&!o.includes(this.minutesStep))throw new Error(`Property minutes-step is invalid. Must be one of ${o.join(",")}`);if(this.secondsStep&&!o.includes(this.secondsStep))throw new Error(`Property seconds-step is invalid. Must be one of ${o.join(",")}`)}timeRange(t=1){return Array.from({length:59/t+1},((s,i)=>i*t))}updateExcluded(){const t=(t="")=>t.split(",").map((t=>t.trim()));this.excludedHoursArray=t(this._excludedHours),this.excludedMinutesArray=t(this._excludedMinutes),this.excludedSecondsArray=t(this._excludedSeconds)}updateTimeSteps(){(this.stepped||Number.isNaN(this.minutesStep))&&(this.minutesStep=15),(this.stepped||Number.isNaN(this.secondsStep))&&(this.secondsStep=10),this.minutesToDisplay=this.timeRange(this.minutesStep),this.secondsToDisplay=this.timeRange(this.secondsStep)}validateTime(t){const s=/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?\s*([AaPp][Mm])?$/.test(t);if(!s)throw new Error('Provided "value" is not valid. Provide a value in the form hh:mm:ss');return s}formatTimePeriod(t){return String(t).padStart(2,"0")}updateValue(){let t=[this._hour,this._minute,this._second].join(":");"12hr"===this.format&&this._period&&(t+=" "+this._period),t!==this.value&&(this.value=t,this.emitTimeValueEvent())}selectTimeAndPeriod(){const t=new Date;if(this.value&&this.validateTime(this.value)){const[s,i]=(this.value||"").trim().split(" "),[h,e,n]=s.split(":").map((t=>parseInt(t)));t.setHours(h,e,n||0),i&&(this._period=i.toLocaleLowerCase())}const[s,i,h]=this.getRoundedTime(t);this._period||(this._period="12hr"===this.format&&parseInt(s)<12?"am":"pm"),this._hour=s,this._minute=i,this._second=h}getRoundedTime(t){const s=6e4*this.minutesStep,i=1e3*this.secondsStep;return this.minutesToDisplay.includes(t.getMinutes())?this.secondsToDisplay.includes(t.getSeconds())||(t=new Date(Math.ceil(t.getTime()/i)*i)):t=new Date(Math.ceil(t.getTime()/s)*s),[t.getHours(),t.getMinutes(),t.getSeconds()].map(this.formatTimePeriod)}hours(){const t="24hr"===this.format?24:12,s="24hr"===this.format?"00":"12";let h;const o=t=>{h="24hr"===this.format?"24"===t?"00":t:"12"===t?"am"===this._period?"12":t:"pm"===this._period?String(parseInt(t)+12):t,this._hour=h,this.value=`${h}:${this._minute}:${this._second}`,this.emitTimeValueEvent()},c=t=>{var s;const i=parseInt(null===(s=this.value)||void 0===s?void 0:s.split(":")[0]);let h="";return this._hour===t||"24hr"!==this.format&&"pm"===this._period&&parseInt(t)+12===parseInt(this._hour)||"am"===this._period&&12===parseInt(t)&&0===i?h=r:(this.excludedHoursArray.includes(this.formatTimePeriod(parseInt(t)))||this.excludedHoursArray.includes(this.formatTimePeriod(parseInt(t)+12)))&&(h=a),h},d=[i("div",{"data-hour":s,class:`\n        ${e.HOUR}\n        ${c(s)}\n        `,onClick:()=>o(String(t))},s)];return Array.from(Array(t),((t,s)=>{const h=this.formatTimePeriod(s);s>0&&d.push(i("div",{"data-hour":h,class:`\n            ${e.HOUR}\n            ${c(h)}\n          `,onClick:()=>o(h)},h))})),i("div",{class:`${e.HOURS} ${n.POSITION.RELATIVE}`},d)}getStateClass(t,s,i){let h="";return parseInt(s)===parseInt(t)?h=r:i.includes(t)&&(h=a),h}getMinuteElement(t){return i("div",{class:`\n        ${e.MINUTE}\n        ${this.getStateClass(t,this._minute,this.excludedMinutesArray)}\n      `,onClick:()=>{this._minute=t,this.updateValue()}},t)}minutes(){return i("div",{class:`${e.MINUTES} ${n.POSITION.RELATIVE}`},this.minutesToDisplay.map((t=>this.getMinuteElement(this.formatTimePeriod(t)))))}getSecondsElement(t){return i("div",{class:`\n          ${e.SECOND}\n          ${this.getStateClass(t,this._second,this.excludedSecondsArray)}\n        `,onClick:()=>{this._second=t,this.updateValue()}},t)}seconds(){return this.displaySeconds?i("div",{class:`${e.SECONDS} ${n.POSITION.RELATIVE}`},this.secondsToDisplay.map((t=>this.getSecondsElement(this.formatTimePeriod(t))))):void 0}periods(){var t;const s=parseInt(null===(t=this.value)||void 0===t?void 0:t.split(":")[0]);if("12hr"===this.format){const t=t=>{let s=e.PERIOD;return t===this._period&&(s+=` ${r}`),s},h=t=>{this._period=t;let i=s;"am"===t?(i>12&&(i-=12),12===i&&(i=12)):"pm"===t&&(i<12&&(i+=12),12===i&&(i=12)),this.value=`${i}:${this._minute}:${this._second}`,this._hour=this.formatTimePeriod(i),this.emitTimeValueEvent()};return i("div",{class:e.PERIODS},i("div",{class:t("am"),onClick:()=>h("am")},"AM"),i("div",{class:t("pm"),onClick:()=>h("pm")},"PM"))}}emitTimeValueEvent(){const t={hour:this._hour,minute:this._minute,second:this._second,value:this.value};"12hr"===this.format&&this._period&&(t.period=this._period),this.eventChange.emit(t)}componentDidLoad(){const t=this.el.querySelector(`.${e.HOURS}`),s=this.el.querySelector(`.${e.MINUTES}`),i=this.el.querySelector(`.${e.SECONDS}`);if(t){const s=t.querySelector(`.${e.HOUR}.${r}`);s&&(t.scrollTop=s.offsetTop-c)}if(s){const t=s.querySelector(`.${e.MINUTE}.${r}`);t&&(s.scrollTop=t.offsetTop-c)}if(i){const t=i.querySelector(`.${e.SECOND}.${r}`);t&&(i.scrollTop=t.offsetTop-c)}}render(){const t=this.hours(),s=this.minutes(),h=this.seconds(),n=this.periods();return i("div",{key:"40c3034c37738c8e8e278826c383a8347f905b7a",class:e.TIME},i("div",{key:"64a6e6f7757e5edc66434a719df311259949bc7c",class:e.CONTENT},t,s,h,n))}get el(){return h(this)}};d.style="";export{d as chi_time}