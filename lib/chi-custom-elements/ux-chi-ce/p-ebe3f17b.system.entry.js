var __awaiter=this&&this.__awaiter||function(t,i,n,e){function s(t){return t instanceof n?t:new n((function(i){i(t)}))}return new(n||(n=Promise))((function(n,r){function o(t){try{u(e.next(t))}catch(t){r(t)}}function h(t){try{u(e["throw"](t))}catch(t){r(t)}}function u(t){t.done?n(t.value):s(t.value).then(o,h)}u((e=e.apply(t,i||[])).next())}))};var __generator=this&&this.__generator||function(t,i){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,s,r,o;return o={next:h(0),throw:h(1),return:h(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function h(t){return function(i){return u([t,i])}}function u(h){if(e)throw new TypeError("Generator is already executing.");while(o&&(o=0,h[0]&&(n=0)),n)try{if(e=1,s&&(r=h[0]&2?s["return"]:h[0]?s["throw"]||((r=s["return"])&&r.call(s),0):s.next)&&!(r=r.call(s,h[1])).done)return r;if(s=0,r)h=[h[0]&2,r.value];switch(h[0]){case 0:case 1:r=h;break;case 4:n.label++;return{value:h[1],done:false};case 5:n.label++;s=h[1];h=[0];continue;case 7:h=n.ops.pop();n.trys.pop();continue;default:if(!(r=n.trys,r=r.length>0&&r[r.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!r||h[1]>r[0]&&h[1]<r[3])){n.label=h[1];break}if(h[0]===6&&n.label<r[1]){n.label=r[1];r=h;break}if(r&&n.label<r[2]){n.label=r[2];n.ops.push(h);break}if(r[2])n.ops.pop();n.trys.pop();continue}h=i.call(t,n)}catch(t){h=[6,t];s=0}finally{e=r=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:true}}};System.register(["./p-65394162.system.js","./p-cfcc0ca6.system.js","./p-2f867cd7.system.js","./p-1350fb0c.system.js","./p-d7b9150b.system.js","./p-032fa119.system.js","./p-efc6172c.system.js"],(function(t){"use strict";var i,n,e,s,r,o,h,u,f,c,a,l,d;return{setters:[function(t){i=t.r;n=t.c;e=t.h;s=t.g;r=t.H},function(t){o=t.a},function(t){h=t.T},function(t){u=t.c;f=t.A;c=t.E},function(t){a=t.P},function(t){l=t.$},function(t){d=t.a}],execute:function(){var p=function(){function t(t,i,n){var e=this;this.positionInitial={x:0,y:0};this.positionEnd={x:0,y:0};this.screenWidth=this.setScreenWidth();this.screenHeight=this.setScreenHeight();this.auxClientCoord=Number.MAX_SAFE_INTEGER;this.auxClientCoord2=Number.MIN_SAFE_INTEGER;this.dragMouseDownHandler=function(t){t.preventDefault();e.positionInitial.x=t.clientX;e.positionInitial.y=t.clientY;e.initialTransformStyling=window.getComputedStyle(e.elementToMove)["transform"];document.addEventListener("mouseup",e.closeDragElement);document.addEventListener("mousemove",e.elementDragHandler)};this.dragTouchHandler=function(t){t.preventDefault();e.positionInitial.x=t.touches[0].clientX;e.positionInitial.y=t.touches[0].clientY;e.initialTransformStyling=window.getComputedStyle(e.elementToMove)["transform"];e.trigger.addEventListener("touchmove",e.elementDragOnTouchHandler)};this.setPosition=function(t,i,n){e.positionEnd.x=e.positionInitial.x-t;e.positionEnd.y=e.positionInitial.y-i;e.positionInitial.x=t;e.positionInitial.y=i;e.elementToMove.style.transform=e.initialTransformStyling;if(n.top<0&&e.auxClientCoord>i){e.auxClientCoord=i}else if(n.left<0&&e.auxClientCoord>t){e.auxClientCoord=t}else if(n.right>e.screenWidth&&e.auxClientCoord2<t){e.auxClientCoord2=t}else if(n.bottom>e.screenHeight&&e.auxClientCoord2<i){e.auxClientCoord2=i}else{e.elementToMove.style.top=e.elementToMove.offsetTop-e.positionEnd.y+"px";e.elementToMove.style.left=e.elementToMove.offsetLeft-e.positionEnd.x+"px";e.auxClientCoord=Number.MAX_SAFE_INTEGER;e.auxClientCoord2=Number.MIN_SAFE_INTEGER}};this.elementDragHandler=function(t){t.preventDefault();if(e.component._popper){e.component._popper.destroy();e.component._popper=null}if(!e.elementToMove){return}var i=e.elementToMove.getBoundingClientRect();e.setPosition(t.clientX,t.clientY,i)};this.elementDragOnTouchHandler=function(t){t.preventDefault();var i=t.targetTouches[0];if(e.component._popper){e.component._popper.destroy();e.component._popper=null}if(!e.elementToMove){return}var n=e.elementToMove.getBoundingClientRect();e.setPosition(i.clientX,i.clientY,n)};this.closeDragElement=function(){document.removeEventListener("mouseup",e.closeDragElement);document.removeEventListener("mousemove",e.elementDragHandler)};this.handlerResize=function(){if(!e.elementToMove){return}var t=e.elementToMove.getBoundingClientRect();e.screenWidth=e.setScreenWidth();e.screenHeight=e.setScreenHeight();if(t.right>=e.screenWidth){e.elementToMove.style.left=Math.abs(t.width+t.width/2-e.screenWidth)+"px"}else if(t.bottom>=e.screenHeight){e.elementToMove.style.top=Math.abs(t.height*2-e.screenHeight)+"px"}};this.trigger=t;this.elementToMove=i;this.component=n;this.trigger.addEventListener("mousedown",this.dragMouseDownHandler);this.trigger.addEventListener("touchstart",this.dragTouchHandler);window.addEventListener("resize",this.handlerResize)}t.prototype.setScreenWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};t.prototype.setScreenHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight};t.prototype.dispose=function(){document.removeEventListener("mouseup",this.closeDragElement);document.removeEventListener("mousemove",this.elementDragHandler);window.removeEventListener("resize",this.handlerResize);this.trigger=null;this.elementToMove=null;this.initialTransformStyling=null;this.positionEnd=null;this.positionInitial=null};return t}();var m="chi-popover.sc-chi-popover-h{display:inline-block}";var v=m;var b=t("chi_popover",function(){function t(t){i(this,t);this.eventShow=n(this,"chiPopoverShow",7);this.eventHide=n(this,"chiPopoverHide",7);this.eventShown=n(this,"chiPopoverShown",7);this.eventHidden=n(this,"chiPopoverHidden",7);this._componentLoaded=false;this._didUpdateCallBackOnceQueue=[];this._closePrevented=false;this.position="top";this.arrow=undefined;this.closable=false;this.drag=false;this.active=undefined;this.reference=undefined;this.portal=undefined;this.modal=undefined;this.preventAutoHide=undefined;this.variant=undefined;this._animationClasses="";this.popoverTitle=undefined;this.popoverFooter=undefined}t.prototype.positionValidation=function(t){if(t&&!o.includes(t)){throw new Error("Not valid position ".concat(t," for popover. Valid values are top, top-start, top-end, right, right-start, right-end, bottom, bottom-start, bottom-end, left, left-start and left-end. "))}if(this._componentLoaded){this._configurePopoverPopper()}};t.prototype.referenceElementChanged=function(t){b.referenceElementValidation(t);this._reference=t?document.querySelector(t):null;if(this._componentLoaded){this._configurePopoverPopper()}};t.referenceElementValidation=function(t){if(t){var i=document.querySelectorAll(t);if(i.length===0){throw new Error("Reference element could not be found.")}if(i.length>1){throw new Error("Found ".concat(i.length," reference candidates matching ").concat(t,". Not able to discern which one is the preferred."))}}};t.prototype.arrowChanged=function(t,i){if(!!t!==!!i&&this._componentLoaded){this._configurePopoverPopper()}};t.prototype.statusChanged=function(t,i){if(!!t!==!!i){if(t){this.preventAutoClose();this._show()}else{this._hide()}}};t.prototype.dragUpdated=function(t){if(t&&!this._drag){this._drag=new p(this._popoverHeader,this._popoverElement,this)}else if(!t&&this._drag){this._drag.dispose();this._drag=undefined}};t.prototype.toggle=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){if(this.active){this.hide()}else{this.show()}return[2]}))}))};t.prototype.show=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.active=true;return[2]}))}))};t.prototype.hide=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.active=false;return[2]}))}))};t.prototype._resetPopperPosition=function(){this._popper.update()};t.prototype._show=function(){var t=this;if(!this._popper)this._initializePopper();if(this.currentAnimation&&!this.currentAnimation.isStopped()){this.currentAnimation.stop()}this._animationClasses=u.TRANSITIONING;this._didUpdateCallBackOnceQueue.push((function(){var i=t._popoverElement.style.transition;t._popoverElement.style.transition="none";t._resetPopperPosition();t.currentAnimation=h.animationFactory((function(){t._popoverElement.style.transform=t._preAnimationTransformStyle}),(function(){t._animationClasses="".concat(u.TRANSITIONING," ").concat(u.ACTIVE);t._popoverElement.style.transition=i;t._popoverElement.style.transform=t._postAnimationTransformStyle}),(function(){t._animationClasses=u.ACTIVE;t.eventShown.emit()}),f.SHORT)}));this.eventShow.emit()};t.prototype._hide=function(){var t=this;if(this.currentAnimation&&!this.currentAnimation.isStopped()){this.currentAnimation.stop()}this.currentAnimation=h.animationFactory((function(){t._animationClasses="".concat(u.TRANSITIONING," ").concat(u.ACTIVE)}),(function(){t._animationClasses=u.TRANSITIONING;t._popoverElement.style.transform=t._preAnimationTransformStyle}),(function(){t._animationClasses="";if(!t._popper){t._initializePopper()}t.eventHidden.emit()}),f.SHORT);this.eventHide.emit()};t.prototype._configurePopoverPopper=function(){if(!this._reference){if(this._popper){this._popper.destroy();this._popper=null}return}this._initializePopper();this._popper.update()};t.prototype._initializePopper=function(){var t=this;var i=function(i){t._preAnimationTransformStyle=null;t._postAnimationTransformStyle=i.styles.transform;if(i.placement.indexOf("top")===0){t._preAnimationTransformStyle="translate3d(".concat(i.popper.left,"px, ").concat(i.popper.top+20,"px, 0)")}else if(i.placement.indexOf("right")===0){t._preAnimationTransformStyle="translate3d(".concat(i.popper.left-20,"px, ").concat(i.popper.top,"px, 0)")}else if(i.placement.indexOf("bottom")===0){t._preAnimationTransformStyle="translate3d(".concat(i.popper.left,"px, ").concat(i.popper.top-20,"px, 0)")}else if(i.placement.indexOf("left")===0){t._preAnimationTransformStyle="translate3d(".concat(i.popper.left+20,"px, ").concat(i.popper.top,"px, 0)")}else{t._preAnimationTransformStyle=i.styles.transform}return i};this._popper=new a(this._reference,this._popoverElement,{modifiers:{applyStyle:{enabled:true},applyChiStyle:{enabled:true,fn:i,order:875},arrow:{element:".".concat(l.ARROW),enabled:this.arrow},preventOverflow:{boundariesElement:"window"}},removeOnDestroy:false,placement:this.position})};t.prototype._destroyPopper=function(){this._preAnimationTransformStyle=null;this._postAnimationTransformStyle=null;if(this._popper){this._popper.destroy();this._popper=null}};t.prototype.connectedCallback=function(){d.call(this,undefined,{childList:true,subtree:true})};t.prototype.componentWillLoad=function(){this.positionValidation(this.position);this.referenceElementChanged(this.reference);if(this.active){this._animationClasses=u.ACTIVE}if(Array.from(this.el.querySelectorAll("[slot=".concat(l.FOOTER,"]"))).length>0){this.popoverFooter=true}};t.prototype.componentDidLoad=function(){var t=this;this._documentClickHandler=function(){if(!t._closePrevented&&!t.preventAutoHide){t.hide()}};this._documentKeyHandler=function(i){if(!t.preventAutoHide&&"key"in i&&(i.key==="Escape"||i.key==="Esc"||i.key===c)){t.hide()}};this._configurePopoverPopper();this._componentLoaded=true;if(this.drag){this.dragUpdated(this.drag)}else{document.addEventListener("click",this._documentClickHandler);document.addEventListener("keyup",this._documentKeyHandler)}};t.prototype.disconnectedCallback=function(){this._destroyPopper();if(this.currentAnimation&&!this.currentAnimation.isStopped()){this.currentAnimation.stop()}if(this._drag){this._drag.dispose();this._drag=undefined}this.currentAnimation=null;this._componentLoaded=false;document.removeEventListener("click",this._documentClickHandler);document.removeEventListener("keyup",this._documentKeyHandler)};t.prototype.componentDidUpdate=function(){while(this._didUpdateCallBackOnceQueue.length){var t=this._didUpdateCallBackOnceQueue.shift();t()}};t.prototype.preventAutoClose=function(){var t=this;this._closePrevented=true;window.clearTimeout(this._closePreventedTimeout);this._closePreventedTimeout=window.setTimeout((function(){t._closePrevented=false}),100)};t.prototype.hostData=function(){return{"aria-hidden":this.active?"false":"true"}};t.prototype.__stencil_render=function(){var t=this;var i=this.closable?e("chi-button",{size:"xs",onClick:function(){return t.hide()},type:"close"}):null;var n=this.popoverTitle&&e("header",{key:"b4e54de6de673eae8b612fd01ec05bba0ff4c30a",ref:function(i){return t._popoverHeader=i},class:l.HEADER},e("h2",{key:"9e75650c32d2b36ee33e74301c4a0404cf7d13e4",class:l.TITLE},this.popoverTitle));var s=this.variant&&this.variant==="text"?e("p",{class:l.TEXT},e("slot",null)):e("slot",null);var r=this.popoverFooter&&e("div",{key:"279e1ccc8cbdda238a2e1155771762639430149d",class:l.FOOTER},e("slot",{key:"2a54e27d0f6738ce02003f8af0c251b20f125fe2",name:l.FOOTER}));return e("section",{key:"462f631c4989bf4e9e9399bf0f52bcdacdfc3ba8",class:"\n          ".concat(l.POPOVER,"\n          ").concat(u.ANIMATED,"\n          ").concat(this.position?"chi-popover--".concat(this.position):"","\n          ").concat(this.arrow?"":l.NO_ARROW,"\n          ").concat(this._animationClasses,"\n          ").concat(this._reference&&this._reference.classList.contains("chi-input")?l.INPUT:"","\n          ").concat(this.closable?l.CLOSABLE:"","\n          ").concat(this.drag?l.DRAGGABLE:"","\n          ").concat(this.portal?"-portal":"","\n          ").concat(this.modal?l.MODAL:"","\n        "),ref:function(i){return t._popoverElement=i},onClick:function(){return t.preventAutoClose()},role:"dialog","aria-modal":"true","aria-label":this.popoverTitle,"aria-hidden":!this.active},i,n,e("div",{key:"60839afcea245b61577621d94d0aa6bcbecb0a5a",class:l.CONTENT},s),r,this.arrow&&e("div",{key:"facb86734a8a0c1e285c3a129ace7e5db0b74108",class:l.ARROW}))};Object.defineProperty(t.prototype,"el",{get:function(){return s(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{position:["positionValidation"],reference:["referenceElementChanged"],arrow:["arrowChanged"],active:["statusChanged"],drag:["dragUpdated"]}},enumerable:false,configurable:true});t.prototype.render=function(){return e(r,this.hostData(),this.__stencil_render())};return t}());b.style=v}}}));