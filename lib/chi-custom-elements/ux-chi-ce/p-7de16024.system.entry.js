System.register(["./p-e2b3de6e.system.js","./p-64887bf4.system.js","./p-bdcd2725.system.js","./p-2f867cd7.system.js"],(function(i){"use strict";var t,s,n,h,e,r,u,f,o,a,c,v,l;return{setters:[function(i){t=i.r;s=i.c;n=i.h;h=i.g},function(i){e=i.a;r=i.S;u=i.b;f=i.c;o=i.U},function(i){a=i.C;c=i.a;v=i.A},function(i){l=i.T}],execute:function(){var d="chi-carousel.sc-chi-carousel-h{display:block;width:100%}";var p=d;var m=25;var b=200;var w=.95;var y=i("chi_carousel",function(){function i(i){var n=this;t(this,i);this.chiViewChange=s(this,"chiViewChange",7);this.scrollBreakpoints={0:m};this.isDragging=false;this.currentStep=0;this.remainingSpace=0;this.isLastView=false;this.isLastStep=false;this.restItemsShown=0;this.resizeHandler=function(){n._calculateCarouselWidth()};this.touchEnd=function(){if(n.isDragging){n.isDragging=false;n.wrapper.style.transform=n.getWrapperTransform()}};this.touchMove=function(i){if(n.isDragging){var t=n.getPositionX(i);var s=n.scrollBreakpoints[n.view+1];var h=n.getMoveDelta();var e=n.isMoveToNext()?s-h:s+h;n.moveEndPosition=t;n.wrapper.style.transform="translateX(".concat(e,"px)");if(h>a){if(n.isMoveToNext()){n.nextView()}else{n.prevView()}n.isDragging=false}}};this.touchStart=function(i){n.moveStartPosition=n.getPositionX(i);n.isDragging=true};this.getPositionX=function(i){return i.touches[0].clientX};this.dots=undefined;this.autoplay=undefined;this.interval=5;this.pagination=undefined;this.noButtonControllers=false;this.single=undefined;this.view=0;this.numberOfViews=0;this.maxItemsShown=undefined;this.customPrevButton=undefined;this.customNextButton=undefined;this.autoplayInterval=undefined;this.transformX=0}i.prototype._calculateCarouselWidth=function(){var i=this._getCarouselItems();this.fullScrollLength=this.el.offsetWidth||this.fullScrollLength;if(this.single){this._applySizeToItems();this.transformX=-(this.currentStep*i[0].offsetWidth)}var t=this.fullScrollLength/i[0].offsetWidth;this.maxItemsShown=t%1>w?Math.ceil(t):Math.floor(t);this.numberOfViews=Math.ceil(i.length/this.maxItemsShown);this.restItemsShown=i.length%this.maxItemsShown;if(this.isLastView){this._calculateView(c.NEXT,this.currentStep)}};i.prototype.connectedCallback=function(){this.customPrevButton=!!this.el.querySelector('[slot="previous"]');this.customNextButton=!!this.el.querySelector('[slot="next"]')};i.prototype.componentDidLoad=function(){this._calculateCarouselWidth();this._autoPlay(false);window.addEventListener("resize",this.resizeHandler)};i.prototype.componentWillOnload=function(){window.removeEventListener("resize",this.resizeHandler)};i.prototype._autoPlay=function(i){var t=this;if(this.autoplay&&!this.autoplayInterval&&!i){this.autoplayInterval=window.setInterval((function(){if(t.view===t.numberOfViews-1){t._goToView(-1)}t._goToView(++t.view)}),this.interval*1e3)}else{window.clearInterval(this.autoplayInterval);this.autoplayInterval=null}};i.prototype._calculateView=function(i,t){var s=this._getCarouselItems();var n=s[0].offsetWidth;var h=t!==undefined?t:this.maxItemsShown*-i+this.currentStep;var e=s.length-h;var r=this.isLastView;this.isLastView=e<=this.maxItemsShown;this.isLastStep=e<=0;if(h<0)h=0;if(this.isLastStep&&i===c.NEXT)return;if(this.isLastView){this._moveLastView(t,e,n)}else if(h===0){this.transformX=0}else{this._moveView(t,n,h,i,r)}if(h>=0){this.currentStep=Math.abs(h)}};i.prototype._moveView=function(i,t,s,n,h){if(i){this.transformX=i*t*-1}else{var e=this._getGap();this.transformX+=h?this.remainingSpace:(Math.abs(s-this.currentStep)*t+e*this.maxItemsShown)*n}};i.prototype._moveLastView=function(i,t,s){var n=this._getGap();var h=this.maxItemsShown+t;this.remainingSpace=Math.abs(this.fullScrollLength-h*s-n*h-n/3);if(i){this.transformX=this.fullScrollLength-(i+t)*s}else{this.transformX-=this.remainingSpace}};i.prototype._bounceView=function(i){var t=this;if(this.isLastStep){this.transformX+=m*i}else{this.transformX=m*i}setTimeout((function(){t.transformX-=m*i}),b)};i.prototype.prevView=function(){var i=this;this._calculateView(c.PREVIOUS);if(this.animation&&!this.animation.isStopped()){this.animation.stop()}if(this.view>=-1){this.animation=l.animationFactory((function(){i._animationClasses="".concat(e)}),(function(){if(i.view>=0){i.view=i.view-1}}),(function(){if(i.view===-1){i.view=0}else{i._animationClasses="";i.chiViewChange.emit(i.view)}}),v.SHORT)}if(this.currentStep===0||this.isLastStep){this._bounceView(c.PREVIOUS)}};i.prototype.nextView=function(){var i=this;this._calculateView(c.NEXT);if(this.animation&&!this.animation.isStopped()){this.animation.stop()}this.animation=l.animationFactory((function(){i._animationClasses="".concat(e)}),(function(){if(i.view<i.numberOfViews){i.view=i.view+1}}),(function(){if(i.view===i.numberOfViews){i.view=i.numberOfViews-1}else{i.chiViewChange.emit(i.view);i._animationClasses=""}}),v.SHORT);if(this.currentStep===0||this.isLastStep){this._bounceView(c.NEXT)}};i.prototype.isMoveToNext=function(){return this.moveStartPosition>this.moveEndPosition};i.prototype.getMoveDelta=function(){return Math.abs(this.moveEndPosition-this.moveStartPosition)};i.prototype.getWrapperTransform=function(){return"translateX(".concat(this.transformX,"px)")};i.prototype._applySizeToItems=function(){var i=this;var t=this._getCarouselItems();if(t){t.forEach((function(t){t.style.width="".concat(i.fullScrollLength,"px")}))}};i.prototype._goToView=function(i){var t=this.maxItemsShown*i;var s=t>this.currentStep?c.NEXT:c.PREVIOUS;this._calculateView(s,t);this.view=i;this.chiViewChange.emit(i)};i.prototype._getCarouselItems=function(){var i=[u.ITEM,r.ITEM];return this.el.querySelectorAll(i.map((function(i){return".".concat(i)})).join(", "))};i.prototype._areThereMultipleItems=function(){var i=this._getCarouselItems();return i.length>1};i.prototype._getItemVisibility=function(i){var t=this.view*this.maxItemsShown;var s=t+this.maxItemsShown;if(this.isLastView&&this.restItemsShown>0){t=t-(this.maxItemsShown-this.restItemsShown)}return i>=t&&i<s};i.prototype.setVisibleClass=function(){var i=this;var t=this._getCarouselItems();t.forEach((function(t,s){var n=i._getItemVisibility(s);t.classList.toggle("-visible",n)}))};i.prototype._getStatComponent=function(){return this.el.querySelector(".".concat(r.STAT))};i.prototype._getGap=function(){var i=this._getStatComponent();if(i){var t=window.getComputedStyle(i);return parseInt(t.gap,10)}return 0};i.prototype.render=function(){var i=this;this.setVisibleClass();var t=this._areThereMultipleItems()&&!this.noButtonControllers&&n("div",{class:"".concat(u.CONTROL," ").concat(u.PREVIOUS),onClick:function(){return i.prevView()}},this.customPrevButton?n("slot",{name:"previous"}):n("chi-button",{size:"sm",type:"float","alternative-text":"Carousel previous",disabled:this.currentStep<=0},n("chi-icon",{icon:"chevron-left"})));var s=this._areThereMultipleItems()&&!this.noButtonControllers&&n("div",{class:"".concat(u.CONTROL," ").concat(u.NEXT),onClick:function(){return i.nextView()}},this.customNextButton?n("slot",{name:"next"}):n("chi-button",{size:"sm",type:"float","alternative-text":"Carousel next",disabled:this.isLastView},n("chi-icon",{icon:"chevron-right"})));var h=n("slot",{name:"items"});var e=this.dots?n("div",{class:u.DOTS},Array(this.numberOfViews).fill(0).map((function(t,s){return n("span",{onClick:function(){i._goToView(s)},class:"\n              ".concat(u.DOT,"\n              ").concat(i.view===s||i.view===-1&&s===0||i.view===i.numberOfViews&&s===i.numberOfViews-1?f:"")})}))):null;var r=this.pagination?n("div",{class:u.PAGINATION},this.view===0||this.view===-1?1:this.view+1>this.numberOfViews?this.numberOfViews:this.view+1," ","of ",this.numberOfViews):null;return n("div",{onTouchStart:this.touchStart,onTouchEnd:this.touchEnd,onTouchMove:this.touchMove,onMouseEnter:function(){return i._autoPlay(true)},onMouseLeave:function(){return i._autoPlay(false)},class:"\n        ".concat(u.CAROUSEL,"\n        ").concat(this.dots?u.DOTS_ADDITION:"","\n        ").concat(this.pagination?u.PAGINATION_ADDITION:"")},n("div",{class:u.CONTENT},n("div",{class:"\n            ".concat(u.WRAPPER,"\n            ").concat(this._animationClasses,"\n            ").concat(this.single?o.DISPLAY.FLEX:"","\n          "),style:{transform:this.getWrapperTransform()},ref:function(t){return i.wrapper=t}},h)),t,s,e,r)};Object.defineProperty(i.prototype,"el",{get:function(){return h(this)},enumerable:false,configurable:true});return i}());y.style=p}}}));