import{r as s,c as t,h as i,g as a}from"./p-99c091ba.js";import{M as h,N as e,b as o,l,U as r,m as n,B as c,n as d,o as g,p as m,d as p}from"./p-e680f502.js";import{j as f}from"./p-834de5c7.js";import{T as b}from"./p-68882606.js";import{A as u}from"./p-3c5e39a4.js";import{v as $}from"./p-d1e6806c.js";const{MARGIN:C,TYPOGRAPHY:M}=r,k=class{constructor(a){s(this,a),this.chiModalShow=t(this,"chiModalShow",7),this.chiModalShown=t(this,"chiModalShown",7),this.chiModalHide=t(this,"chiModalHide",7),this.chiModalHidden=t(this,"chiModalHidden",7),this.chiModalBack=t(this,"chiModalBack",7),this.chiModalAccept=t(this,"chiModalAccept",7),this.chiModalCancel=t(this,"chiModalCancel",7),this.modalTitle="Modal title",this.subtitle="",this.button="",this.center=!1,this.inverse=!1,this.multiStep=!1,this.animated=!1,this.noBorder=!1,this.simple=!1,this.isActive=!1,this._uuid4=$(),this.getUpdateAnimationClasses=(s,t)=>{const i=[`${p} ${s}`,p],a=[p,`${p} ${t}`];return this.isActive||(i.reverse(),a.reverse()),[i,a]},this.getCloseButton=()=>i("chi-button",{type:"close",class:r.DISPLAY.FLEX,"data-dismiss":"modal","aria-label":"Close",onClick:()=>this.cancel()}),this.cancel=()=>{this.hide(),this.chiModalCancel.emit()},this.accept=()=>{this.hide(),this.chiModalAccept.emit()},this.getFooter=()=>i("footer",{class:`${h.FOOTER} ${this.noBorder?e:""}`},i("slot",{name:"footer"},i("chi-button",{"data-dismiss":"modal",onClick:()=>this.cancel()},"Cancel"),i("chi-button",{color:"primary",onClick:()=>this.accept()},"Save")))}sectionAnimationClassesChanged(){this.isActive=this.sectionAnimationClasses.includes(o)}scrollableValidation(s){if(s&&!["400","480","long-content"].includes(s))throw new Error(`${s} is not a valid type for scrollable. Valid values are 400, 480 and long-content`)}triggerValidation(){const s=[this.button,this.target,this.el.querySelector('[slot="trigger"]')].filter(Boolean).length;if(0===s)throw new Error(`No trigger detected. Please provide one trigger. Modal ID is ${this._uuid4}.`);if(s>1)throw new Error(`Multiple triggers detected. Please provide only one trigger. Modal ID is ${this._uuid4}.`)}componentDidLoad(){const s=this.target||this.el.querySelector('[slot="trigger"]');s&&s.addEventListener("click",(()=>this.toggle()))}componentWillLoad(){this.triggerValidation(),this.scrollableValidation(this.scrollable),this.sectionAnimationClasses="",this.backdropAnimationClasses=l}updateAnimationClasses(s,t){this.sectionAnimationClasses=s,this.backdropAnimationClasses=t}handleAnimation(s,t,i){if(this._animation&&!this._animation.isStopped()&&this._animation.stop(),this.animated){const[a,h]=this.getUpdateAnimationClasses(s,t);this._animation=b.animationFactory((()=>this.updateAnimationClasses(a[0],a[1])),(()=>this.updateAnimationClasses(h[0],h[1])),i,u.MEDIUM)}else i()}async show(){this.chiModalShow.emit(),this.handleAnimation(l,o,(()=>{this.updateAnimationClasses(o,""),this.chiModalShown.emit()}))}async hide(){this.chiModalHide.emit(),this.handleAnimation(o,l,(()=>{this.updateAnimationClasses("",l),this.chiModalHidden.emit()}))}async toggle(){this.isActive?await this.hide():await this.show()}getContent(){const s=f([h.CONTENT,this.simple&&`${M.TEXT_CENTER} ${r.PADDING[6]}`,["400","480"].includes(this.scrollable)&&r.SIZING[`MAX_H${this.scrollable}`]]);return i("div",{class:s},i("slot",{name:"content"},i("p",{class:`${M.TEXT} ${C[0]}`},i("slot",null))))}getHeader(){const s=i("button",{onClick:()=>this.chiModalBack.emit(),class:h.BACK,"aria-label":"Back"});return i("header",{class:`${h.HEADER} ${this.noBorder?e:""}`},i("h2",{class:`${h.TITLE} ${this.multiStep?n:""}`},this.modalTitle),this.subtitle&&i("h3",{class:h.SUBTITLE},this.subtitle),this.multiStep&&s,this.getCloseButton())}getTrigger(){return i("slot",{name:"trigger"},i("chi-button",{id:`modal-trigger-${this._uuid4}`,class:h.TRIGGER,"data-target":`#${this._uuid4}`,onClick:()=>this.toggle()},this.button))}getBackdropClasses(){return f([c.BACKDROP,this.backdropAnimationClasses,"long-content"===this.scrollable&&r.SIZING.MAX_H480,this.center&&d,this.inverse&&g,this.animated&&m])}getSectionClasses(){return f([h.MODAL,this.sectionAnimationClasses,this.animated&&m])}render(){const s={id:this._uuid4,class:this.getSectionClasses(),role:"dialog","aria-label":"Modal description","aria-modal":"true"};return i("div",{key:"9c657d10d5323ada0200b32ffd9f67f559318808"},!this.target&&this.getTrigger(),i("div",{key:"5da143e2d17ed037d79660432410f08a4064abb8",class:this.getBackdropClasses()},i("div",{key:"09ef547d12ec7a289bc14a6e39c35fbd8d778ae1",class:c.WRAPPER},i("section",Object.assign({key:"9ad1466701de1700535c0c063485706c5f7e79da"},s),!this.simple&&this.getHeader(),this.getContent(),!this.simple&&this.getFooter()))))}get el(){return a(this)}static get watchers(){return{sectionAnimationClasses:["sectionAnimationClassesChanged"],scrollable:["scrollableValidation"]}}};export{k as chi_modal}