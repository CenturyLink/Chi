var __awaiter=this&&this.__awaiter||function(t,i,n,r){function s(t){return t instanceof n?t:new n((function(i){i(t)}))}return new(n||(n=Promise))((function(n,e){function a(t){try{u(r.next(t))}catch(t){e(t)}}function o(t){try{u(r["throw"](t))}catch(t){e(t)}}function u(t){t.done?n(t.value):s(t.value).then(a,o)}u((r=r.apply(t,i||[])).next())}))};var __generator=this&&this.__generator||function(t,i){var n={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},r,s,e,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(t){return function(i){return u([t,i])}}function u(o){if(r)throw new TypeError("Generator is already executing.");while(a&&(a=0,o[0]&&(n=0)),n)try{if(r=1,s&&(e=o[0]&2?s["return"]:o[0]?s["throw"]||((e=s["return"])&&e.call(s),0):s.next)&&!(e=e.call(s,o[1])).done)return e;if(s=0,e)o=[o[0]&2,e.value];switch(o[0]){case 0:case 1:e=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;s=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(e=n.trys,e=e.length>0&&e[e.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!e||o[1]>e[0]&&o[1]<e[3])){n.label=o[1];break}if(o[0]===6&&n.label<e[1]){n.label=e[1];e=o;break}if(e&&n.label<e[2]){n.label=e[2];n.ops.push(o);break}if(e[2])n.ops.pop();n.trys.pop();continue}o=i.call(t,n)}catch(t){o=[6,t];s=0}finally{r=e=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(t,i,n){if(n||arguments.length===2)for(var r=0,s=i.length,e;r<s;r++){if(e||!(r in i)){if(!e)e=Array.prototype.slice.call(i,0,r);e[r]=i[r]}}return t.concat(e||Array.prototype.slice.call(i))};import{r as registerInstance,c as createEvent,h,H as Host,g as getElement}from"./index-422a57bb.js";import{y as TABS_CLASSES,b as ACTIVE_CLASS,U as UTILITY_CLASSES,p as DROPDOWN_CLASSES,D as DISABLED_CLASS,n as INVERSE_CLASS,z as GRID_CLASSES,I as ICON_CLASS,G as GENERIC_SIZE_CLASSES}from"./classes-26189a5f.js";import{T as TABS_SEE_MORE_DEFAULT_MESSAGE,A as ANIMATION_DURATION}from"./constants-e61c7d0c.js";import{T as TabTriggerSizes,b as TabTriggerDirections}from"./types-870494ef.js";import{T as TABS_SIZES}from"./size-9d0c9884.js";import{T as ThreeStepsAnimation}from"./ThreeStepsAnimation-a718d5b8.js";import{v as v4}from"./v4-a4ec28c0.js";var Compare=function(){function t(){}t.deepEqual=function(t,i){if(typeof t!==typeof i){return false}if(t===null||t===undefined||i===null||i===undefined){return t===i}if(typeof t==="object"){if(Object.keys(t).length!==Object.keys(i).length){return false}for(var n in t){if(!this.deepEqual(t[n],i[n])){return false}}return true}else{return t===i}};t.isEmpty=function(t){var i=this;return Array.isArray(t)&&this.isEmptyArray(t)||!this.hasProperties(t)||!Object.keys(t).some((function(n){if(Array.isArray(t[n])){return t[n].length>0}else if(t[n]===Object(t[n])){return!i.isEmpty(t[n])}else{return t[n]!==null&&t[n]!==undefined&&t[n]!==""}}))};t.isEmptyArray=function(t){if(t===void 0){t=[]}return!t||t.length===0};t.hasProperties=function(t){for(var i in t){return!!i}return false};return t}();var tabsCss="chi-tabs.sc-chi-tabs-h{display:block}";var ChiTabsStyle0=tabsCss;var MARGIN_LEFT_BASE=24;var MARGIN_LEFT_LG=32;var Tabs=function(){function t(t){var i=this;registerInstance(this,t);this.chiTabChange=createEvent(this,"chiTabChange",7);this.activeTab="";this.slidingBorder=false;this.border=false;this.solid=false;this.vertical=false;this.size="md";this.seeMoreMessage=TABS_SEE_MORE_DEFAULT_MESSAGE;this.inverse=false;this.extraClass="";this.sliding=false;this.isSeeMoreActive=false;this.isSeeMoreVisible=false;this.isSeeMoreTriggerMeasured=false;this.currentTabs=[];this.activePanel="";this.activeTabElement=null;this.availableSpace=0;this.dropdownKey=0;this.slidingBorderElement=null;this.lisArrayLength=0;this.liSizes={};this.seeMoreTriggerElementWidth=0;this.uuid4=v4();this.seeMoreTriggerId="see-more-trigger-".concat(this.uuid4);this.dropdownKeys={};this.handlerClickSeeMore=function(t){t.preventDefault();i.isSeeMoreActive=!i.isSeeMoreActive;if(!i.seeMoreDropdown){var n=document.getElementById("".concat(i.uuid4,"-see-more-dropdown"));i.seeMoreDropdown=n}i.seeMoreDropdown.toggle()};this.handlerResize=function(){i._setSeeMoreTriggerElement();i.setAvailableSpace();i.setListOverflow();i.activeTabElement=i.getActiveTabTrigger();i.setSlidingBorderStyles();i.hideAllDropdowns()};this.handlerTabMouseEnter=function(t){i.hideInactiveDropdowns(t);if(!t.children||t.disabled)return;i.dropdownKeys[t.id]+=1;var n=i.getSubLevelDropdown(t.id);if(n){n.show()}};this.handlerMouseLeave=function(t,n){var r=n?DROPDOWN_CLASSES.MENU:DROPDOWN_CLASSES.MENU_ITEM;var s=Array.from(document.getElementsByClassName(r));var e=s.some((function(i){return i===t.relatedTarget}));if(!e){i.hideAllDropdowns()}};this.liMarginLeft=this.size==="lg"?MARGIN_LEFT_LG:MARGIN_LEFT_BASE}t.prototype.sizeValidation=function(t){var i=TABS_SIZES.join(", ");if(t&&!TABS_SIZES.includes(t)){throw new Error("".concat(t," is not a valid size for tabs. Valid values are: ").concat(i,". "))}};t.prototype.setTabs=function(t,i){if(!Compare.deepEqual(t,i)){this.currentTabs=t||[]}};t.prototype.activeTabChanged=function(t){this.activeTabValidation();var i=this.tabs.find((function(i){return i.id===t}));var n=this.el.querySelector("#".concat(t));if(!i){var r=this.findParentTab(this.tabs,t);if(!r){throw new Error("Tried to set active-tab with id '".concat(t,"' but it was not found"))}i={id:t};n=this.el.querySelector("li#".concat(r.id," a"))}this.changeTab(i,n);this.chiTabChange.emit(i)};t.prototype.componentWillLoad=function(){this.sizeValidation(this.size);this.activeTabValidation()};t.prototype.connectedCallback=function(){var t;this.currentTabs=(t=this.tabs)!==null&&t!==void 0?t:[]};t.prototype.componentDidLoad=function(){if(!this.vertical){this.setAvailableSpace();this.setLiSizes();this.seeMoreTriggerElementWidth=this.calculateSize(this.seeMoreTriggerElement,TabTriggerSizes.Width)+(this.solid?0:this.liMarginLeft);this.isSeeMoreTriggerMeasured=true;this.activeTabElement=this.getActiveTabTrigger();this.setSlidingBorderStyles();window.addEventListener("resize",this.handlerResize)}this.setActivePanelId(this.currentTabs);this.activatePanel(this.activePanel)};t.prototype.componentDidUpdate=function(){this.setAvailableSpace();this.setLiSizes()};t.prototype.disconnectedCallback=function(){window.removeEventListener("resize",this.handlerResize)};t.prototype.activeTabValidation=function(){var t=this.findTab(this.tabs,this.activeTab);if(t&&t.disabled){throw new Error("Disabled tab (#".concat(t.id,") cannot be set as active"))}};t.prototype.activateTab=function(t,i){this.activeTab=t.id;this.activeTabElement=i};t.prototype.setActivePanelId=function(t){var i=this;t.forEach((function(t){if(t.id===(i===null||i===void 0?void 0:i.activeTab)){i.activePanel=t.id}else if(t.children){i.setActivePanelId(t.children)}}))};t.prototype.activatePanel=function(t){var i,n;if(!t)return;(i=this.el.querySelector(".".concat(TABS_CLASSES.PANEL,".").concat(ACTIVE_CLASS)))===null||i===void 0?void 0:i.classList.remove(ACTIVE_CLASS);(n=this.el.querySelector(".".concat(TABS_CLASSES.PANEL,"#").concat(t)))===null||n===void 0?void 0:n.classList.add(ACTIVE_CLASS)};t.prototype.calculateSize=function(t,i){return t?t.getBoundingClientRect()[i]:0};t.prototype.setParentTabActive=function(t){var i=t.parent?t.parent.id:t.id;var n=document.getElementById(i);n.classList.add(ACTIVE_CLASS);if(t.parent){this.setParentTabActive(t.parent)}};t.prototype.findParentTab=function(t,i){var n=this;return t===null||t===void 0?void 0:t.find((function(t){if(t.id===i)return t;if(t.children&&n.findParentTab(t.children,i)){return t}}))};t.prototype.findTab=function(t,i){var n=this;return t===null||t===void 0?void 0:t.find((function(t){return t.id===i?t:n.findTab(t.children,i)}))};t.prototype.removeActiveItems=function(){Object.keys(this.dropdownKeys).forEach((function(t){var i=document.getElementById(t);if(i&&i.classList.contains(ACTIVE_CLASS)){i.classList.remove(ACTIVE_CLASS)}}))};t.prototype.createDropdowns=function(t,i,n){var r=this;var s=[];t.forEach((function(t){var e=i===0;var a=e?t.id:n;if(t.children&&t.children.length>0&&!t.disabled){r.dropdownKeys[t.id]=0;s.push(r.getDropdown(t,e,a));s.push.apply(s,r.createDropdowns(t.children,i+1,a))}}));return s};t.prototype.getDropdown=function(t,i,n){return h("chi-dropdown",{id:"subLevelDropdown-".concat(t.id),position:i?"bottom-start":"right-start",reference:"#".concat(t.id),"visible-items":t.visibleItems,key:"".concat(t.id,"-").concat(this.dropdownKey)},this.getDropdownMenuItems(t,n))};t.prototype.getDropdownMenuItems=function(t,i){var n=this;return t.children.map((function(r){r.parent=t;return n.getDropdownMenuItem(r,(function(s){return n.onDropdownMenuItemClick(s,t,r,i)}),UTILITY_CLASSES.JUSTIFY.BETWEEN)}))};t.prototype.getDropdownMenuItem=function(t,i,n){var r=this;if(n===void 0){n=""}return h("a",{class:"".concat(DROPDOWN_CLASSES.MENU_ITEM," \n          ").concat(n," \n          ").concat(this._isActiveTab(t)?ACTIVE_CLASS:"","\n          ").concat(t.disabled?DISABLED_CLASS:"","\n        "),id:t.id,href:this.getTabHref(t),target:this.getTabHrefTarget(t),onMouseEnter:function(){return r.handlerTabMouseEnter(t)},onMouseLeave:function(t){return r.handlerMouseLeave(t)},onClick:function(t){return i(t)},innerHTML:t.label,slot:"menu"},t.children&&t.children.length>0&&this.dropdownIcon("right"))};t.prototype.onDropdownMenuItemClick=function(t,i,n,r){var s=this.getSubLevelDropdown(i.id);var e=this.el.querySelector("li#".concat(r," a"));this.handlerClickTab(t,n,e);this.isSeeMoreActive=false;if(s){this.setParentTabActive(n);s.hide()}};t.prototype.getActiveTabTrigger=function(){return this.el.querySelector("li.".concat(ACTIVE_CLASS))};t.prototype.getSubLevelDropdown=function(t){return this.el.querySelector("chi-dropdown#subLevelDropdown-".concat(t))};t.prototype.getTabHref=function(t){var i;var n=t.href||"#".concat(t.id);if((i=t.href)===null||i===void 0?void 0:i.startsWith("www.")){n="//"+n}return n};t.prototype.getTabHrefTarget=function(t){var i=t.target||"";if(!this.isTabInternalLink(t)&&!i){i="_blank"}return i};t.prototype.isTabInternalLink=function(t){return!t.href||t.href.startsWith("#")};t.prototype.getPosition=function(t){var i=window.getComputedStyle(t);var n=i.getPropertyValue("margin-top");var r=i.getPropertyValue("margin-left");return{left:t.offsetLeft-parseInt(r),top:t.offsetTop-parseInt(n)}};t.prototype.handlerClickTab=function(t,i,n){if(this.isTabInternalLink(i)||i.disabled){t.preventDefault()}if(i.disabled)return;if(this.animation&&!this.animation.isStopped()){this.animation.stop()}var r=n||t.target;if(this.slidingBorder){this.setAnimation(r)}this.changeTab(i,r)};t.prototype.changeTab=function(t,i){this.removeActiveItems();this.activateTab(t,i);this.activatePanel(t.id)};t.prototype.setAnimation=function(t){var i=this;var n=this.getPosition(t);this.animation=ThreeStepsAnimation.animationFactory((function(){i.sliding=true}),(function(){var r=i.getSlidingBorderAnimationStyle();var s=i.calculateSize(t,r.dimension);i.slidingBorderElement.style[r.direction]="".concat(n[r.direction],"px");i.slidingBorderElement.style[r.dimension]="".concat(s,"px")}),(function(){i.slidingBorderElement.style.width="";i.sliding=false}),ANIMATION_DURATION.MEDIUM)};t.prototype.getSlidingBorderAnimationStyle=function(){return this.vertical?{dimension:TabTriggerSizes.Height,direction:TabTriggerDirections.Top}:{dimension:TabTriggerSizes.Width,direction:TabTriggerDirections.Left}};t.prototype.getParentIds=function(t){var i=[];var n=function(t){if(t.parent){i.push(t.parent.id);n(t.parent)}};n(t);return i};t.prototype.hideInactiveDropdowns=function(t){var i=this.getParentIds(t);var n=__spreadArray(__spreadArray([],i,true),[t.id],false);var r=Object.keys(this.dropdownKeys).filter((function(t){return!n.includes(t)}));this.hideSelectedDropdowns(r)};t.prototype.hideDropdown=function(){this.isSeeMoreActive=false};t.prototype._isActiveTab=function(t){var i=this;var n=t.id===this.activeTab;if(!n&&t.children){n=t.children.some((function(t){return i._isActiveTab(t)}))}return!t.disabled&&n};t.prototype.isActiveTabOverflown=function(t){var i=this;return t.some((function(t){return i._isActiveTab(t)&&!!t.overflow}))};t.prototype._setSeeMoreTriggerElement=function(){if(!this.seeMoreTriggerElement){var t=document.getElementById(this.seeMoreTriggerId);this.seeMoreTriggerElement=t}};t.prototype.setAvailableSpace=function(){this.availableSpace=this.calculateSize(this.el,TabTriggerSizes.Width)};t.prototype.setLiSizes=function(){return __awaiter(this,void 0,void 0,(function(){var t,i;var n=this;return __generator(this,(function(r){switch(r.label){case 0:i=(t=this.ulElement)===null||t===void 0?void 0:t.querySelectorAll("li.".concat(TABS_CLASSES.TRIGGER));this.lisArrayLength=this.currentTabs.length;return[4,i===null||i===void 0?void 0:i.forEach((function(t,i){n.liSizes[t.dataset.index]=n.calculateSize(t,TabTriggerSizes.Width)+(i===0||n.solid?0:n.liMarginLeft)}))];case 1:r.sent();this.setListOverflow();return[2]}}))}))};t.prototype.setListOverflow=function(){if(this.vertical){return}var t=this._stringifyTabs(this.currentTabs);var i=0;this.isSeeMoreVisible=false;for(var n=0;n<this.lisArrayLength;n++){var r=n+1===this.lisArrayLength;var s=r?0:this.seeMoreTriggerElementWidth;var e=i+this.liSizes[n]+s<=this.availableSpace;if(!this.isSeeMoreVisible&&e){i+=this.liSizes[n];this.currentTabs[n].overflow=false}else{this.currentTabs[n].overflow=true;this.isSeeMoreVisible=true}}if(this._stringifyTabs(this.currentTabs)!==t){this.dropdownKey+=1}};t.prototype._stringifyTabs=function(t){var i=function(t){var n=t.children,r=t.id,s=t.label,e=t.overflow,a=t.target,o=t.href;return{children:n===null||n===void 0?void 0:n.map(i),id:r,label:s,overflow:e,target:a,href:o}};return JSON.stringify(t.map(i))};t.prototype.setSlidingBorderStyles=function(){if(!this.activeTab){return}var t=this.isActiveTabOverflown(this.currentTabs)?this.seeMoreTriggerElement:this.activeTabElement;var i=this.getPosition(t);this.slidingBorderLeft="".concat(i.left,"px")};t.prototype.hideDropdowns=function(t){var i=this;t.forEach((function(t){var n=i.getSubLevelDropdown(t);if(n){n.hide()}}))};t.prototype.hideAllDropdowns=function(){this.hideDropdowns(Object.keys(this.dropdownKeys))};t.prototype.hideSelectedDropdowns=function(t){this.hideDropdowns(t)};t.prototype.dropdownIcon=function(t){return h("i",{class:"".concat(ICON_CLASS," ").concat(UTILITY_CLASSES.MARGIN.LEFT[2]," ").concat(UTILITY_CLASSES.MARGIN.RIGHT[0]," icon-chevron-").concat(t," ").concat(GENERIC_SIZE_CLASSES.XS),"aria-hidden":"true"})};t.prototype.getTabElements=function(){var t=this;var i;var n=[];(i=this.currentTabs)===null||i===void 0?void 0:i.forEach((function(i,r){if(i.overflow)return;n.push(h("li",{class:"".concat(TABS_CLASSES.TRIGGER," ").concat(t._isActiveTab(i)?ACTIVE_CLASS:""," ").concat(i.disabled?DISABLED_CLASS:""),"data-index":r,id:i.id,onMouseEnter:function(){t.hideAllDropdowns();t.handlerTabMouseEnter(i)}},h("a",{href:t.getTabHref(i),target:t.getTabHrefTarget(i),class:i.children?"-has-child":"",role:"tab","aria-selected":t._isActiveTab(i),"aria-controls":"#".concat(i.id),onClick:function(n){return t.handlerClickTab(n,i)},innerHTML:i.label})))}));return n};t.prototype.getSlidingBorder=function(){var t=this;return this.slidingBorder?h("li",{class:TABS_CLASSES.SLIDING_BORDER,ref:function(i){return t.slidingBorderElement=i},style:{left:this.slidingBorderLeft}}):null};t.prototype.getSeeMoreTrigger=function(){var t=this;var i=this.isActiveTabOverflown(this.currentTabs)?ACTIVE_CLASS:"";return!this.vertical&&(this.isSeeMoreVisible||!this.isSeeMoreTriggerMeasured)&&h("li",{class:"".concat(TABS_CLASSES.SHOW_MORE," ").concat(i),id:this.seeMoreTriggerId,ref:function(i){return t.seeMoreTriggerElement=i}},h("a",{href:"#seeMore",role:"tab",onClick:function(i){return t.handlerClickSeeMore(i)},ref:function(i){return t.seeMoreTriggerAnchorElement=i}},this.seeMoreMessage))};t.prototype.getOverflowItems=function(){var t=this;return this.currentTabs.filter((function(t){return t.overflow})).map((function(i){return t.getDropdownMenuItem(i,(function(n){t.handlerClickTab(n,i,t.seeMoreTriggerAnchorElement);t.seeMoreDropdown.hide();t.isSeeMoreActive=false}))}))};t.prototype.getDropdowns=function(){var t=this;return this.vertical?[]:__spreadArray([this.isSeeMoreVisible&&h("chi-dropdown",{active:this.isSeeMoreActive,id:"".concat(this.uuid4,"-see-more-dropdown"),key:this.dropdownKey,position:"bottom",reference:"#".concat(this.seeMoreTriggerId),ref:function(i){return t.seeMoreDropdown=i}},this.getOverflowItems())],this.createDropdowns(this.currentTabs,0),true)};t.prototype.getPanels=function(){return h("slot",{name:"panels"})};t.prototype.getListClasses=function(){return[TABS_CLASSES.TABS,this.slidingBorder&&TABS_CLASSES.ANIMATE,this.border&&TABS_CLASSES.BORDER,this.vertical&&TABS_CLASSES.VERTICAL,this.solid&&TABS_CLASSES.SOLID,this.sliding&&TABS_CLASSES.SLIDING,this.size&&"-".concat(this.size),this.inverse&&INVERSE_CLASS,this.extraClass].filter(Boolean).join(" ")};t.prototype.getTabs=function(){var t=this;var i=this.getTabElements();var n=this.getSlidingBorder();var r=this.getSeeMoreTrigger();return h("ul",{class:this.getListClasses(),ref:function(i){t.ulElement=i},onMouseLeave:function(i){return t.handlerMouseLeave(i,true)},role:"tablist"},i,r,n)};t.prototype.getChiGridLayout=function(t,i,n){return h(Host,null,h("div",{class:"".concat(GRID_CLASSES.GRID," ").concat(GRID_CLASSES.NO_GUTTER)},h("div",{class:GRID_CLASSES.COL},t,i),n))};t.prototype.render=function(){var t=this.getDropdowns();var i=this.getPanels();var n=this.getTabs();return this.vertical&&this.el.querySelector('[slot="panels"] .chi-tabs-panel')?this.getChiGridLayout(n,t,i):h(Host,null,n,t,i)};Object.defineProperty(t.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{size:["sizeValidation"],tabs:["setTabs"],activeTab:["activeTabChanged"]}},enumerable:false,configurable:true});return t}();Tabs.style=ChiTabsStyle0;export{Tabs as chi_tabs};