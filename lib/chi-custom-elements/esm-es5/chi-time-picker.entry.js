var __awaiter=this&&this.__awaiter||function(t,i,e,n){function s(t){return t instanceof e?t:new e((function(i){i(t)}))}return new(e||(e=Promise))((function(e,c){function r(t){try{u(n.next(t))}catch(t){c(t)}}function o(t){try{u(n["throw"](t))}catch(t){c(t)}}function u(t){t.done?e(t.value):s(t.value).then(r,o)}u((n=n.apply(t,i||[])).next())}))};var __generator=this&&this.__generator||function(t,i){var e={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,s,c,r;return r={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(r[Symbol.iterator]=function(){return this}),r;function o(t){return function(i){return u([t,i])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(r&&(r=0,o[0]&&(e=0)),e)try{if(n=1,s&&(c=o[0]&2?s["return"]:o[0]?s["throw"]||((c=s["return"])&&c.call(s),0):s.next)&&!(c=c.call(s,o[1])).done)return c;if(s=0,c)o=[o[0]&2,c.value];switch(o[0]){case 0:case 1:c=o;break;case 4:e.label++;return{value:o[1],done:false};case 5:e.label++;s=o[1];o=[0];continue;case 7:o=e.ops.pop();e.trys.pop();continue;default:if(!(c=e.trys,c=c.length>0&&c[c.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!c||o[1]>c[0]&&o[1]<c[3])){e.label=o[1];break}if(o[0]===6&&e.label<c[1]){e.label=c[1];c=o;break}if(c&&e.label<c[2]){e.label=c[2];e.ops.push(o);break}if(c[2])e.ops.pop();e.trys.pop();continue}o=i.call(t,e)}catch(t){o=[6,t];s=0}finally{n=c=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};import{r as registerInstance,h,g as getElement}from"./index-c11192ea.js";import{c as contains}from"./utils-48628cb4.js";import{E as ESCAPE_KEYCODE,b as CHI_TIME_AUTO_SCROLL_DELAY}from"./constants-0e68989c.js";import{d as TIME_CLASSES}from"./classes-6227bd8c.js";import{v as v4}from"./v4-a4ec28c0.js";var TimePicker=function(){function t(t){registerInstance(this,t);this.value=undefined;this.disabled=false;this.displaySeconds=false;this._excludedHours=undefined;this._excludedMinutes=undefined;this._excludedSeconds=undefined;this.format="12hr";this.active=false;this.minutesStep=undefined;this.secondsStep=undefined}t.prototype._onFocusIn=function(t){if(t.target!==document.body&&t.target!==null){this.active=contains(this.el,t.target)}};t.prototype._onClick=function(t){if(t.target!==document.body&&t.target!==null){this.active=contains(this.el,t.target)}};t.prototype._isEscapeKey=function(t){return"key"in t&&(t.key==="Escape"||t.key==="Esc"||t.key===ESCAPE_KEYCODE)};t.prototype._onKeyUp=function(t){if(this._isEscapeKey(t)){this.active=false;this._input.blur()}};t.prototype.timeChanged=function(t,i){if(!!t!==!!i){this.value=t}};t.prototype.setTime=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){this.value=t;return[2]}))}))};t.prototype.getTime=function(){return Promise.resolve(this.value)};t.prototype.componentWillLoad=function(){this._onFocusIn=this._onFocusIn.bind(this);this._onClick=this._onClick.bind(this);this._onKeyUp=this._onKeyUp.bind(this);this._uuid=this.el.id?this.el.id:"tp-".concat(v4())};t.prototype.componentDidLoad=function(){document.body.addEventListener("focusin",this._onFocusIn);document.body.addEventListener("click",this._onClick);document.body.addEventListener("keyup",this._onKeyUp)};t.prototype.disconnectedCallback=function(){document.body.removeEventListener("focusin",this._onFocusIn);document.body.removeEventListener("click",this._onClick);document.body.removeEventListener("keyup",this._onKeyUp)};t.prototype.handlePopoverOpen=function(t){t.stopPropagation();var i=this.el.querySelector(".".concat(TIME_CLASSES.HOURS));var e=this.el.querySelector(".".concat(TIME_CLASSES.MINUTES));var n=this.el.querySelector(".".concat(TIME_CLASSES.SECONDS));setTimeout((function(){if(i){var t=i.querySelector(".".concat(TIME_CLASSES.HOUR,".-active"));if(t){i.scrollTop=t.offsetTop-4}}if(e){var s=e.querySelector(".".concat(TIME_CLASSES.MINUTE,".-active"));if(s){e.scrollTop=s.offsetTop-4}}if(n){var c=n.querySelector(".".concat(TIME_CLASSES.SECOND,".-active"));if(c){n.scrollTop=c.offsetTop-4}}}),CHI_TIME_AUTO_SCROLL_DELAY)};t.prototype.handleTimeChange=function(t){var i=document.getElementById("".concat(this._uuid,"-control"));var e=function(t){return String(t).length>1?String(t):"0".concat(t)};var n=this.format!=="24hr"&&t.detail.hour>12?t.detail.hour-12:t.detail.hour;var s=this.displaySeconds?":".concat(e(t.detail.second)):"";var c=this.format==="12hr"?e(t.detail.period):"";i.value="".concat(e(n),":").concat(e(t.detail.minute)).concat(s," ").concat(c)};t.prototype.render=function(){var t=this;var i=h("chi-popover",{key:"4e6b62e3cac614e82a6bbd3ac015f033202fe6f2",id:"popover-".concat(this._uuid),position:"bottom",reference:"#".concat(this._uuid,"-control"),"prevent-auto-hide":true,active:this.active},h("chi-time",{key:"684a2814efcaf4255ba07742af4e9b3b5dbaef72","display-seconds":this.displaySeconds,"excluded-hours":this._excludedHours,"excluded-minutes":this._excludedMinutes,"excluded-seconds":this._excludedSeconds,format:this.format,value:this.value,"seconds-step":this.secondsStep,"minutes-step":this.minutesStep}));return h("div",{key:"c4a7cfe21119aedb33f4fac064349b987dba6045",class:this.disabled?"-disabled":""},h("div",{key:"901c7e426a856fa6095876f496e5676de074ec98",class:"chi-input__wrapper -icon--right"},h("input",{key:"bade73cd8c1082516eb9caa0f3725550112dd4fb",id:"".concat(this._uuid,"-control"),class:"chi-input\n              ".concat(this.active?"-focus":""),type:"text",placeholder:this.format==="12hr"?"--:-- --":"--:--",ref:function(i){return t._input=i},value:this.value,disabled:this.disabled}),h("chi-icon",{key:"f0fc7e7bde70fb8475a552342553718c30832962",icon:"circle-clock-outline"})),!this.disabled&&i)};Object.defineProperty(t.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{value:["timeChanged"]}},enumerable:false,configurable:true});return t}();export{TimePicker as chi_time_picker};