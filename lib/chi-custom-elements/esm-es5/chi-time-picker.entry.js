var __awaiter=this&&this.__awaiter||function(t,i,e,n){function s(t){return t instanceof e?t:new e((function(i){i(t)}))}return new(e||(e=Promise))((function(e,r){function c(t){try{u(n.next(t))}catch(t){r(t)}}function o(t){try{u(n["throw"](t))}catch(t){r(t)}}function u(t){t.done?e(t.value):s(t.value).then(c,o)}u((n=n.apply(t,i||[])).next())}))};var __generator=this&&this.__generator||function(t,i){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,s,r,c;return c={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(c[Symbol.iterator]=function(){return this}),c;function o(t){return function(i){return u([t,i])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(c&&(c=0,o[0]&&(e=0)),e)try{if(n=1,s&&(r=o[0]&2?s["return"]:o[0]?s["throw"]||((r=s["return"])&&r.call(s),0):s.next)&&!(r=r.call(s,o[1])).done)return r;if(s=0,r)o=[o[0]&2,r.value];switch(o[0]){case 0:case 1:r=o;break;case 4:e.label++;return{value:o[1],done:false};case 5:e.label++;s=o[1];o=[0];continue;case 7:o=e.ops.pop();e.trys.pop();continue;default:if(!(r=e.trys,r=r.length>0&&r[r.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!r||o[1]>r[0]&&o[1]<r[3])){e.label=o[1];break}if(o[0]===6&&e.label<r[1]){e.label=r[1];r=o;break}if(r&&e.label<r[2]){e.label=r[2];e.ops.push(o);break}if(r[2])e.ops.pop();e.trys.pop();continue}o=i.call(t,e)}catch(t){o=[6,t];s=0}finally{n=r=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};import{r as registerInstance,h,g as getElement}from"./index-422a57bb.js";import{c as contains}from"./utils-48628cb4.js";import{E as ESCAPE_KEYCODE,b as CHI_TIME_AUTO_SCROLL_DELAY}from"./constants-e61c7d0c.js";import{f as TIME_CLASSES}from"./classes-26189a5f.js";import{v as v4}from"./v4-a4ec28c0.js";var TimePicker=function(){function t(t){registerInstance(this,t);this.disabled=false;this.displaySeconds=false;this.format="12hr";this.active=false}t.prototype._onFocusIn=function(t){if(t.target!==document.body&&t.target!==null){this.active=contains(this.el,t.target)}};t.prototype._onClick=function(t){if(t.target!==document.body&&t.target!==null){this.active=contains(this.el,t.target)}};t.prototype._isEscapeKey=function(t){return"key"in t&&(t.key==="Escape"||t.key==="Esc"||t.key===ESCAPE_KEYCODE)};t.prototype._onKeyUp=function(t){if(this._isEscapeKey(t)){this.active=false;this._input.blur()}};t.prototype.timeChanged=function(t,i){if(!!t!==!!i){this.value=t}};t.prototype.setTime=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){this.value=t;return[2]}))}))};t.prototype.getTime=function(){return Promise.resolve(this.value)};t.prototype.componentWillLoad=function(){this._onFocusIn=this._onFocusIn.bind(this);this._onClick=this._onClick.bind(this);this._onKeyUp=this._onKeyUp.bind(this);this._uuid=this.el.id?this.el.id:"tp-".concat(v4())};t.prototype.componentDidLoad=function(){document.body.addEventListener("focusin",this._onFocusIn);document.body.addEventListener("click",this._onClick);document.body.addEventListener("keyup",this._onKeyUp)};t.prototype.disconnectedCallback=function(){document.body.removeEventListener("focusin",this._onFocusIn);document.body.removeEventListener("click",this._onClick);document.body.removeEventListener("keyup",this._onKeyUp)};t.prototype.handlePopoverOpen=function(t){t.stopPropagation();var i=this.el.querySelector(".".concat(TIME_CLASSES.HOURS));var e=this.el.querySelector(".".concat(TIME_CLASSES.MINUTES));var n=this.el.querySelector(".".concat(TIME_CLASSES.SECONDS));setTimeout((function(){if(i){var t=i.querySelector(".".concat(TIME_CLASSES.HOUR,".-active"));if(t){i.scrollTop=t.offsetTop-4}}if(e){var s=e.querySelector(".".concat(TIME_CLASSES.MINUTE,".-active"));if(s){e.scrollTop=s.offsetTop-4}}if(n){var r=n.querySelector(".".concat(TIME_CLASSES.SECOND,".-active"));if(r){n.scrollTop=r.offsetTop-4}}}),CHI_TIME_AUTO_SCROLL_DELAY)};t.prototype.handleTimeChange=function(t){var i=document.getElementById("".concat(this._uuid,"-control"));var e=function(t){return String(t).length>1?String(t):"0".concat(t)};var n=this.format!=="24hr"&&t.detail.hour>12?t.detail.hour-12:t.detail.hour;var s=this.displaySeconds?":".concat(e(t.detail.second)):"";var r=this.format==="12hr"?e(t.detail.period):"";i.value="".concat(e(n),":").concat(e(t.detail.minute)).concat(s," ").concat(r)};t.prototype.render=function(){var t=this;var i=h("chi-popover",{key:"26d9f7d750f02863d7271a463d199f9055585082",id:"popover-".concat(this._uuid),position:"bottom",reference:"#".concat(this._uuid,"-control"),"prevent-auto-hide":true,active:this.active},h("chi-time",{key:"9289d58f72f2fbfbd45a957438f0ff02d0327be3","display-seconds":this.displaySeconds,"excluded-hours":this._excludedHours,"excluded-minutes":this._excludedMinutes,"excluded-seconds":this._excludedSeconds,format:this.format,value:this.value,"seconds-step":this.secondsStep,"minutes-step":this.minutesStep}));return h("div",{key:"ec63612c5c01e9617318ba1e818931e4a35ae22b",class:this.disabled?"-disabled":""},h("div",{key:"86ca7f2d8281229b7d3394f67b7eb5a632e8ce27",class:"chi-input__wrapper -icon--right"},h("input",{key:"8de1cfb6d63f9729df39cb12ffef18320fc42db1",id:"".concat(this._uuid,"-control"),class:"chi-input\n              ".concat(this.active?"-focus":""),type:"text",placeholder:this.format==="12hr"?"--:-- --":"--:--",ref:function(i){return t._input=i},value:this.value,disabled:this.disabled}),h("chi-icon",{key:"d410db1bca22264c109d279980401f49eb7d12fa",icon:"circle-clock-outline"})),!this.disabled&&i)};Object.defineProperty(t.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{value:["timeChanged"]}},enumerable:false,configurable:true});return t}();export{TimePicker as chi_time_picker};