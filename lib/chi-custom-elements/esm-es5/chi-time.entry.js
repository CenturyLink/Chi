import{r as registerInstance,c as createEvent,h,g as getElement}from"./index-93bc7bbf.js";import{d as TIME_CLASSES,U as UTILITY_CLASSES,c as ACTIVE_CLASS,D as DISABLED_CLASS}from"./classes-6227bd8c.js";import{i as TIME_PICKER_TIME_STEPS,j as CHI_TIME_SCROLL_ADJUSTMENT}from"./constants-0e68989c.js";var timeScss="";var ChiTimeStyle0=timeScss;var Time=function(){function i(i){registerInstance(this,i);this.eventChange=createEvent(this,"chiTimeChange",7);this.displaySeconds=false;this.format="12hr";this.excludedHoursArray=[];this.excludedMinutesArray=[];this.excludedSecondsArray=[];this.minutesToDisplay=[];this.secondsToDisplay=[]}i.prototype.componentWillLoad=function(){this.updateTimeSteps();this.validateTimeSteps();this.selectTimeAndPeriod();this.updateExcluded();this.updateValue()};i.prototype.validateTimeSteps=function(){if(this.minutesStep&&!TIME_PICKER_TIME_STEPS.includes(this.minutesStep)){throw new Error("Property minutes-step is invalid. Must be one of ".concat(TIME_PICKER_TIME_STEPS.join(",")))}if(this.secondsStep&&!TIME_PICKER_TIME_STEPS.includes(this.secondsStep)){throw new Error("Property seconds-step is invalid. Must be one of ".concat(TIME_PICKER_TIME_STEPS.join(",")))}};i.prototype.timeRange=function(i){if(i===void 0){i=1}return Array.from({length:59/i+1},(function(t,s){return s*i}))};i.prototype.updateExcluded=function(){var i=function(i){if(i===void 0){i=""}return i.split(",").map((function(i){return i.trim()}))};this.excludedHoursArray=i(this._excludedHours);this.excludedMinutesArray=i(this._excludedMinutes);this.excludedSecondsArray=i(this._excludedSeconds)};i.prototype.updateTimeSteps=function(){if(this.stepped||Number.isNaN(this.minutesStep)){this.minutesStep=15}if(this.stepped||Number.isNaN(this.secondsStep)){this.secondsStep=10}this.minutesToDisplay=this.timeRange(this.minutesStep);this.secondsToDisplay=this.timeRange(this.secondsStep)};i.prototype.validateTime=function(i){var t=/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?\s*([AaPp][Mm])?$/.test(i);if(!t){throw new Error('Provided "value" is not valid. Provide a value in the form hh:mm:ss')}return t};i.prototype.formatTimePeriod=function(i){return String(i).padStart(2,"0")};i.prototype.updateValue=function(){var i=[this._hour,this._minute,this._second].join(":");if(this.format==="12hr"&&this._period){i+=" "+this._period}if(i!==this.value){this.value=i;this.emitTimeValueEvent()}};i.prototype.selectTimeAndPeriod=function(){var i=new Date;if(this.value&&this.validateTime(this.value)){var t=(this.value||"").trim().split(" "),s=t[0],n=t[1];var r=s.split(":").map((function(i){return parseInt(i)})),e=r[0],h=r[1],a=r[2];i.setHours(e,h,a||0);if(n){this._period=n.toLocaleLowerCase()}}var S=this.getRoundedTime(i),f=S[0],u=S[1],E=S[2];if(!this._period){this._period=this.format==="12hr"&&parseInt(f)<12?"am":"pm"}this._hour=f;this._minute=u;this._second=E};i.prototype.getRoundedTime=function(i){var t=1e3*60*this.minutesStep;var s=1e3*this.secondsStep;if(!this.minutesToDisplay.includes(i.getMinutes())){i=new Date(Math.ceil(i.getTime()/t)*t)}else if(!this.secondsToDisplay.includes(i.getSeconds())){i=new Date(Math.ceil(i.getTime()/s)*s)}return[i.getHours(),i.getMinutes(),i.getSeconds()].map(this.formatTimePeriod)};i.prototype.hours=function(){var i=this;var t=this.format==="24hr"?24:12;var s=this.format==="24hr"?"00":"12";var n;var r=function(t){if(i.format==="24hr"){n=t==="24"?"00":t}else{if(t==="12"){n=i._period==="am"?"12":t}else{n=i._period==="pm"?String(parseInt(t)+12):t}}i._hour=n;i.value="".concat(n,":").concat(i._minute,":").concat(i._second);i.emitTimeValueEvent()};var e=function(t){var s;var n=parseInt((s=i.value)===null||s===void 0?void 0:s.split(":")[0]);var r="";if(i._hour===t||!(i.format==="24hr")&&i._period==="pm"&&parseInt(t)+12===parseInt(i._hour)||i._period==="am"&&parseInt(t)===12&&n===0){r=ACTIVE_CLASS}else{if(i.excludedHoursArray.includes(i.formatTimePeriod(parseInt(t)))||i.excludedHoursArray.includes(i.formatTimePeriod(parseInt(t)+12))){r=DISABLED_CLASS}}return r};var a=[h("div",{"data-hour":s,class:"\n        ".concat(TIME_CLASSES.HOUR,"\n        ").concat(e(s),"\n        "),onClick:function(){return r(String(t))}},s)];Array.from(Array(t),(function(t,s){var n=i.formatTimePeriod(s);if(s>0){a.push(h("div",{"data-hour":n,class:"\n            ".concat(TIME_CLASSES.HOUR,"\n            ").concat(e(n),"\n          "),onClick:function(){return r(n)}},n))}}));return h("div",{class:"".concat(TIME_CLASSES.HOURS," ").concat(UTILITY_CLASSES.POSITION.RELATIVE)},a)};i.prototype.getStateClass=function(i,t,s){var n="";if(parseInt(t)===parseInt(i)){n=ACTIVE_CLASS}else if(s.includes(i)){n=DISABLED_CLASS}return n};i.prototype.getMinuteElement=function(i){var t=this;return h("div",{class:"\n        ".concat(TIME_CLASSES.MINUTE,"\n        ").concat(this.getStateClass(i,this._minute,this.excludedMinutesArray),"\n      "),onClick:function(){t._minute=i;t.updateValue()}},i)};i.prototype.minutes=function(){var i=this;return h("div",{class:"".concat(TIME_CLASSES.MINUTES," ").concat(UTILITY_CLASSES.POSITION.RELATIVE)},this.minutesToDisplay.map((function(t){return i.getMinuteElement(i.formatTimePeriod(t))})))};i.prototype.getSecondsElement=function(i){var t=this;return h("div",{class:"\n          ".concat(TIME_CLASSES.SECOND,"\n          ").concat(this.getStateClass(i,this._second,this.excludedSecondsArray),"\n        "),onClick:function(){t._second=i;t.updateValue()}},i)};i.prototype.seconds=function(){var i=this;return this.displaySeconds?h("div",{class:"".concat(TIME_CLASSES.SECONDS," ").concat(UTILITY_CLASSES.POSITION.RELATIVE)},this.secondsToDisplay.map((function(t){return i.getSecondsElement(i.formatTimePeriod(t))}))):undefined};i.prototype.periods=function(){var i=this;var t;var s=parseInt((t=this.value)===null||t===void 0?void 0:t.split(":")[0]);if(this.format==="12hr"){var n=function(t){var s=TIME_CLASSES.PERIOD;if(t===i._period){s+=" ".concat(ACTIVE_CLASS)}return s};var r=function(t){i._period=t;var n=s;if(t==="am"){if(n>12){n=n-12}if(n===12){n=12}}else if(t==="pm"){if(n<12){n=n+12}if(n===12){n=12}}i.value="".concat(n,":").concat(i._minute,":").concat(i._second);i._hour=i.formatTimePeriod(n);i.emitTimeValueEvent()};return h("div",{class:TIME_CLASSES.PERIODS},h("div",{class:n("am"),onClick:function(){return r("am")}},"AM"),h("div",{class:n("pm"),onClick:function(){return r("pm")}},"PM"))}return};i.prototype.emitTimeValueEvent=function(){var i={hour:this._hour,minute:this._minute,second:this._second,value:this.value};if(this.format==="12hr"&&this._period){i.period=this._period}this.eventChange.emit(i)};i.prototype.componentDidLoad=function(){var i=this.el.querySelector(".".concat(TIME_CLASSES.HOURS)),t=this.el.querySelector(".".concat(TIME_CLASSES.MINUTES)),s=this.el.querySelector(".".concat(TIME_CLASSES.SECONDS));if(i){var n=i.querySelector(".".concat(TIME_CLASSES.HOUR,".").concat(ACTIVE_CLASS));if(n){i.scrollTop=n.offsetTop-CHI_TIME_SCROLL_ADJUSTMENT}}if(t){var r=t.querySelector(".".concat(TIME_CLASSES.MINUTE,".").concat(ACTIVE_CLASS));if(r){t.scrollTop=r.offsetTop-CHI_TIME_SCROLL_ADJUSTMENT}}if(s){var e=s.querySelector(".".concat(TIME_CLASSES.SECOND,".").concat(ACTIVE_CLASS));if(e){s.scrollTop=e.offsetTop-CHI_TIME_SCROLL_ADJUSTMENT}}};i.prototype.render=function(){var i=this.hours(),t=this.minutes(),s=this.seconds(),n=this.periods();return h("div",{key:"8c9c0dd1ad2a5a8899dd669ad6e1fe5efc8ac8b3",class:TIME_CLASSES.TIME},h("div",{key:"96865e91a4e87218841c87eedfc82319426a3529",class:TIME_CLASSES.CONTENT},i,t,s,n))};Object.defineProperty(i.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});return i}();Time.style=ChiTimeStyle0;export{Time as chi_time};