var __spreadArray=this&&this.__spreadArray||function(t,i,r){if(r||arguments.length===2)for(var n=0,e=i.length,s;n<e;n++){if(s||!(n in i)){if(!s)s=Array.prototype.slice.call(i,0,n);s[n]=i[n]}}return t.concat(s||Array.prototype.slice.call(i))};import{r as registerInstance,c as createEvent,h,g as getElement}from"./index-422a57bb.js";import{y as TAGS_CLASSES}from"./classes-51f800b6.js";import{j as joinArrayValues}from"./utils-48628cb4.js";var Tags=function(){function t(t){registerInstance(this,t);this.chiChange=createEvent(this,"chiChange",7);this.placeholder="";this.tags=[];this._tags=[]}t.prototype.componentWillLoad=function(){if(this.tags){this.updateTags(this.tags)}};t.prototype.updateTags=function(t){this._tags=(t!==null&&t!==void 0?t:[]).map((function(t){return Object.assign({},t)}))};t.prototype._focusInput=function(){var t=this;setTimeout((function(){return t.el.querySelector(".".concat(TAGS_CLASSES.INPUT," input")).focus()}),100)};t.prototype._onKeyDown=function(t){var i=t.target;var r=i.value.trim();if(r&&["Tab","Enter"].includes(t.key)){t.preventDefault();this._tags=__spreadArray(__spreadArray([],this._tags,true),[{name:r}],false);i.value="";this._focusInput();this.chiChange.emit(this._tags)}};t.prototype._onDeleteTag=function(t){this._tags=this._tags.filter((function(i){return i!==t}));this._focusInput();this.chiChange.emit(this._tags)};t.prototype._getTagElement=function(t){var i=this;return h("li",null,h("chi-badge",{class:TAGS_CLASSES.TAG},t.name,h("chi-button",{type:"close",size:"xs",onClick:function(){return i._onDeleteTag(t)}})))};t.prototype._getInput=function(){var t=this;var i,r;return h("li",{class:TAGS_CLASSES.INPUT},h("input",{type:"text",placeholder:this.placeholder||"",onKeyDown:function(i){return t._onKeyDown(i)},tabindex:"0","aria-label":this.placeholder||"Add tag",size:(r=(i=this.placeholder)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:1}))};t.prototype.render=function(){var t=this;var i=this._tags.map((function(i){return t._getTagElement(i)}));var r=this._getInput();var n=joinArrayValues([TAGS_CLASSES.TAGS,this._status&&"-".concat(this._status)]);return h("ul",{key:"212443d7e66d6022c292c369003b870ac3ff6f30",class:n},i,r)};Object.defineProperty(t.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{tags:["updateTags"]}},enumerable:false,configurable:true});return t}();export{Tags as chi_tags};