<template lang="pug">
ComponentExample(title="Complex" id="complex-data-table" :tabs="exampleTabs")
  template(#example)
    ChiDataTable(:config="config" :dataTableData="table" ref='dataTableComplex')
      template(#status="payload")
        i(:class="`chi-icon icon-${payload.icon} -icon--${payload.color}`" aria-hidden="true")
        span.-text--truncate(style="padding-left: 0.5rem;") {{ payload.status }}
      template(#name="payload")
        ChiPopoverExample(:name="payload.name", :id="payload.id")
      template(#actions="payload")
        ChiDropdownExample(:id="payload.id")
      template(#toolbar)
        ChiDataTableToolbar
          template(#end)
            chi-button(@click="printTable" variant="flat" type="icon" aria-label="Print data table complex example")
              chi-icon(icon="print")
      template(#bulk-actions)
        .chi-bulk-actions__buttons
          .chi-bulk-actions__buttons-mobile.-z--40
            chi-button(variant='flat' type='icon' aria-label='Edit')
              chi-icon(icon='edit')
            chi-button(variant='flat' type='icon' aria-label='Compose')
              chi-icon(icon='compose')
            chi-button(variant='flat' type='icon' aria-label='Delete')
              chi-icon(icon='delete')
            chi-button(variant='flat' type='icon' aria-label='Print')
              chi-icon(icon='print')
          .chi-bulk-actions__buttons-desktop
            chi-button(size='xs' aria-label='Download')
              chi-icon(icon='arrow-to-bottom')
              span Download
            chi-button(size='xs' aria-label='Compose')
              chi-icon(icon='arrow-to-bottom')
              span Compose
            chi-button(size='xs' aria-label='Delete')
              chi-icon(icon='arrow-to-bottom')
              span Delete
            chi-button(size='xs' aria-label='Print')
              chi-icon(icon='arrow-to-bottom')
              span Print

  template(#code-vue)
    .chi-tab__description.-p--2
      | Create reusable Vue components based on your needs and use them as custom templates for Data Table cells and row accordions
    .-d--flex.-no-gutter.-bt--1
      .-bg--grey-15.-pt--3.-br--1(style="width: 14rem;")
        ul#example-vertical-base.chi-tabs.-vertical(role='tablist' aria-label='chi-tabs-vertical-base')
          li.-active
            a(href='#vertical-base-1' role='tab' aria-selected='true' aria-controls='vertical-base-1') ExampleDataTable.vue
          li
            a(href='#vertical-base-2' role='tab' aria-selected='false' tabindex='-1' aria-controls='vertical-base-2') ExamplePopover.vue
          li
            a(href='#vertical-base-3' role='tab' aria-selected='false' tabindex='-1' aria-controls='vertical-base-3') ExampleDropdown.vue
          li.chi-sliding-border
      .-flex--grow1
        #vertical-base-1.chi-tabs-panel.-active(role='tabpanel')
          Copy(lang="html" :code="codeSnippets.dataTableExample")
        #vertical-base-2.chi-tabs-panel(role='tabpanel')
          Copy(lang="html" :code="codeSnippets.popoverExample")
        #vertical-base-3.chi-tabs-panel(role='tabpanel')
          Copy(lang="html" :code="codeSnippets.dropdownExample")
</template>

<script lang="ts">
import { Vue } from 'vue-facing-decorator';
import PopoverExample from './../popover-example.vue';
import DropdownExample from './../dropdown-example.vue';

@NuxtComponent({
  components: {
    ChiPopoverExample: PopoverExample,
    ChiDropdownExample: DropdownExample,
  },
  methods: {
    printTable() {
      (this.$refs.dataTableComplex as any)?.print('Data table - Complex');
    },
  },
  mounted() {
    chi.tab(document.getElementById('example-vertical-base'));
  },
  data: () => {
    return {
      exampleTabs: [
        {
          active: false,
          id: 'webcomponent',
          label: 'Web Component',
          disabled: true,
        },
        {
          active: true,
          id: 'vue',
          label: 'Vue',
        },
        {
          active: false,
          id: 'htmlblueprint',
          label: 'HTML Blueprint',
          disabled: true,
        },
      ],
      config: {
        columnResize: false,
        selectable: true,
        style: {
          portal: false,
          noBorder: false,
          bordered: false,
          hover: false,
          size: 'md',
          striped: true,
        },
        pagination: {
          activePage: 1,
          compact: false,
          firstLast: true,
          pageJumper: true,
        },
        resultsPerPage: 3,
        defaultSort: {
          key: 'name',
          sortBy: 'string',
          direction: 'ascending',
        },
        showExpandAll: true,
        showSelectAllDropdown: true,
      },
      table: {
        head: {
          name: { label: 'Name', sortable: true, sortBy: 'name', sortDataType: 'string', key: true, bold: true },
          status: {
            label: 'Status',
            sortable: true,
            sortBy: 'status',
            sortDataType: 'string',
            description: 'Helpful information goes here.',
          },
          userID: { label: 'User ID', key: true, icon: 'user' },
          lastLogin: { label: 'Last Login', key: true },
          actions: { label: 'Actions', align: 'right', isPrintDisabled: true },
        },
        body: [
          {
            expanded: true,
            id: 'name-1',
            data: [
              { template: 'name', payload: { name: 'Name 1', id: 'name-1' } },
              {
                template: 'status',
                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
              },
              'user-name-1',
              '18 Dec 2020 3:26 p.m.',
              {
                template: 'actions',
                payload: { id: 'name-1' },
              },
            ],
            nestedContent: {
              table: {
                data: [
                  {
                    id: 'child-1-name-1',
                    data: [
                      'Child 1 Name 1',
                      {
                        template: 'status',
                        payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                      },
                      'user-name-1',
                      '18 Dec 2020 2:38 a.m.',
                      {
                        template: 'actions',
                        payload: { id: 'child-1-name-1' },
                      },
                    ],
                    nestedContent: {
                      table: {
                        data: [
                          {
                            id: 'grandchild-1-name-1',
                            data: [
                              'Grand Child 1 Name 1',
                              {
                                template: 'status',
                                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                              },
                              'user-name-1',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-1-name-1' },
                              },
                            ],
                          },
                          {
                            id: 'grandchild-2-name-1',
                            data: [
                              'Grand Child 2 Name 1',
                              {
                                template: 'status',
                                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                              },
                              'user-name-1',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-2-name-1' },
                              },
                            ],
                          },
                        ],
                      },
                    },
                  },
                  {
                    id: 'child-2-name-1',
                    data: [
                      'Child 2 Name 1',
                      {
                        template: 'status',
                        payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                      },
                      'user-name-1',
                      '18 Dec 2020 2:38 a.m.',
                      {
                        template: 'actions',
                        payload: { id: 'child-2-name-1' },
                      },
                    ],
                    nestedContent: {
                      table: {
                        data: [
                          {
                            id: 'grandchild-3-name-1',
                            data: [
                              'Grand Child 3 Name 1',
                              {
                                template: 'status',
                                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                              },
                              'user-name-1',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-3-name-1' },
                              },
                            ],
                          },
                          {
                            id: 'grandchild-4-name-1',
                            data: [
                              'Grand Child 4 Name 1',
                              {
                                template: 'status',
                                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                              },
                              'user-name-1',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-4-name-1' },
                              },
                            ],
                          },
                        ],
                      },
                    },
                  },
                ],
              },
            },
          },
          {
            id: 'name-2',
            data: [
              { template: 'name', payload: { name: 'Name 2', id: 'name-2' } },
              {
                template: 'status',
                payload: { status: 'Due', icon: 'warning', color: 'warning' },
              },
              'user-name-2',
              '18 Dec 2020 3:26 p.m.',
              {
                template: 'actions',
                payload: { id: 'name-2' },
              },
            ],
            nestedContent: {
              table: {
                data: [
                  {
                    id: 'child-1-name-2',
                    data: [
                      'Child 1 Name 2',
                      {
                        template: 'status',
                        payload: { status: 'Due', icon: 'warning', color: 'warning' },
                      },
                      'user-name-2',
                      '18 Dec 2020 2:38 a.m.',
                      {
                        template: 'actions',
                        payload: { id: 'child-1-name-2' },
                      },
                    ],
                    nestedContent: {
                      table: {
                        data: [
                          {
                            id: 'grandchild-1-name-2',
                            data: [
                              'Grand Child 1 Name 2',
                              {
                                template: 'status',
                                payload: { status: 'Due', icon: 'warning', color: 'warning' },
                              },
                              'user-name-2',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-1-name-2' },
                              },
                            ],
                          },
                          {
                            id: 'grandchild-2-name-2',
                            data: [
                              'Grand Child 2 Name 2',
                              {
                                template: 'status',
                                payload: { status: 'Due', icon: 'warning', color: 'warning' },
                              },
                              'user-name-2',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-2-name-2' },
                              },
                            ],
                          },
                        ],
                      },
                    },
                  },
                  {
                    id: 'child-2-name-2',
                    data: [
                      'Child 2 Name 2',
                      {
                        template: 'status',
                        payload: { status: 'Due', icon: 'warning', color: 'warning' },
                      },
                      'user-name-2',
                      '18 Dec 2020 2:38 a.m.',
                      {
                        template: 'actions',
                        payload: { id: 'child-2-name-2' },
                      },
                    ],
                    nestedContent: {
                      table: {
                        data: [
                          {
                            id: 'grandchild-3-name-2',
                            data: [
                              'Grand Child 3 Name 2',
                              {
                                template: 'status',
                                payload: { status: 'Due', icon: 'warning', color: 'warning' },
                              },
                              'user-name-2',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-3-name-2' },
                              },
                            ],
                          },
                          {
                            id: 'grandchild-4-name-2',
                            data: [
                              'Grand Child 4 Name 2',
                              {
                                template: 'status',
                                payload: { status: 'Due', icon: 'warning', color: 'warning' },
                              },
                              'user-name-2',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-4-name-2' },
                              },
                            ],
                          },
                        ],
                      },
                    },
                  },
                ],
              },
            },
          },
          {
            id: 'name-3',
            data: [
              {
                template: 'name',
                payload: {
                  name: 'Name 3',
                  id: 'name-3',
                },
              },
              {
                template: 'status',
                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
              },
              'user-name-3',
              '18 Dec 2020 3:26 p.m.',
              {
                template: 'actions',
                payload: { id: 'name-3' },
              },
            ],
            nestedContent: {
              table: {
                data: [
                  {
                    id: 'child-1-name-3',
                    data: [
                      'Child 1 Name 3',
                      {
                        template: 'status',
                        payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                      },
                      'user-name-3',
                      '18 Dec 2020 2:38 a.m.',
                      {
                        template: 'actions',
                        payload: { id: 'child-1-name-3' },
                      },
                    ],
                    nestedContent: {
                      table: {
                        data: [
                          {
                            id: 'grandchild-1-name-3',
                            data: [
                              'Grand Child 1 Name 3',
                              {
                                template: 'status',
                                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                              },
                              'user-name-3',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-1-name-3' },
                              },
                            ],
                          },
                          {
                            id: 'grandchild-2-name-3',
                            data: [
                              'Grand Child 2 Name 3',
                              {
                                template: 'status',
                                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                              },
                              'user-name-3',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-2-name-3' },
                              },
                            ],
                          },
                        ],
                      },
                    },
                  },
                  {
                    id: 'child-2-name-3',
                    data: [
                      'Child 2 Name 3',
                      {
                        template: 'status',
                        payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                      },
                      'user-name-3',
                      '18 Dec 2020 2:38 a.m.',
                      {
                        template: 'actions',
                        payload: { id: 'child-2-name-3' },
                      },
                    ],
                    nestedContent: {
                      table: {
                        data: [
                          {
                            id: 'grandchild-3-name-3',
                            data: [
                              'Grand Child 3 Name 3',
                              {
                                template: 'status',
                                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                              },
                              'user-name-3',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-3-name-3' },
                              },
                            ],
                          },
                          {
                            id: 'grandchild-4-name-3',
                            data: [
                              'Grand Child 4 Name 3',
                              {
                                template: 'status',
                                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                              },
                              'user-name-3',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-4-name-3' },
                              },
                            ],
                          },
                        ],
                      },
                    },
                  },
                ],
              },
            },
          },
          {
            id: 'name-4',
            data: [
              {
                template: 'name',
                payload: {
                  name: 'Name 4',
                  id: 'name-4',
                },
              },
              {
                template: 'status',
                payload: { status: 'Due', icon: 'warning', color: 'warning' },
              },
              'user-name-4',
              '18 Dec 2020 3:26 p.m.',
              {
                template: 'actions',
                payload: { id: 'name-4' },
              },
            ],
            nestedContent: {
              table: {
                data: [
                  {
                    id: 'child-1-name-4',
                    data: [
                      'Child 1 Name 4',
                      {
                        template: 'status',
                        payload: { status: 'Due', icon: 'warning', color: 'warning' },
                      },
                      'user-name-4',
                      '18 Dec 2020 2:38 a.m.',
                      {
                        template: 'actions',
                        payload: { id: 'child-1-name-4' },
                      },
                    ],
                    nestedContent: {
                      table: {
                        data: [
                          {
                            id: 'grandchild-1-name-4',
                            data: [
                              'Grand Child 1 Name 4',
                              {
                                template: 'status',
                                payload: { status: 'Due', icon: 'warning', color: 'warning' },
                              },
                              'user-name-4',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-1-name-4' },
                              },
                            ],
                          },
                          {
                            id: 'grandchild-2-name-4',
                            data: [
                              'Grand Child 2 Name 4',
                              {
                                template: 'status',
                                payload: { status: 'Due', icon: 'warning', color: 'warning' },
                              },
                              'user-name-4',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-2-name-4' },
                              },
                            ],
                          },
                        ],
                      },
                    },
                  },
                  {
                    id: 'child-2-name-4',
                    data: [
                      'Child 2 Name 4',
                      {
                        template: 'status',
                        payload: { status: 'Due', icon: 'warning', color: 'warning' },
                      },
                      'user-name-4',
                      '18 Dec 2020 2:38 a.m.',
                      {
                        template: 'actions',
                        payload: { id: 'child-2-name-4' },
                      },
                    ],
                    nestedContent: {
                      table: {
                        data: [
                          {
                            id: 'grandchild-3-name-4',
                            data: [
                              'Grand Child 3 Name 4',
                              {
                                template: 'status',
                                payload: { status: 'Due', icon: 'warning', color: 'warning' },
                              },
                              'user-name-4',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-3-name-4' },
                              },
                            ],
                          },
                          {
                            id: 'grandchild-4-name-4',
                            data: [
                              'Grand Child 4 Name 4',
                              {
                                template: 'status',
                                payload: { status: 'Due', icon: 'warning', color: 'warning' },
                              },
                              'user-name-4',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-4-name-4' },
                              },
                            ],
                          },
                        ],
                      },
                    },
                  },
                ],
              },
            },
          },
          {
            id: 'name-5',
            data: [
              {
                template: 'name',
                payload: {
                  name: 'Name 5',
                  id: 'name-5',
                },
              },
              {
                template: 'status',
                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
              },
              'user-name-5',
              '18 Dec 2020 3:26 p.m.',
              {
                template: 'actions',
                payload: { id: 'name-5' },
              },
            ],
            nestedContent: {
              table: {
                data: [
                  {
                    id: 'child-1-name-5',
                    data: [
                      'Child 1 Name 5',
                      {
                        template: 'status',
                        payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                      },
                      'user-name-5',
                      '18 Dec 2020 2:38 a.m.',
                      {
                        template: 'actions',
                        payload: { id: 'child-1-name-5' },
                      },
                    ],
                    nestedContent: {
                      table: {
                        data: [
                          {
                            id: 'grandchild-1-name-5',
                            data: [
                              'Grand Child 1 Name 5',
                              {
                                template: 'status',
                                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                              },
                              'user-name-5',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-1-name-5' },
                              },
                            ],
                          },
                          {
                            id: 'grandchild-2-name-5',
                            data: [
                              'Grand Child 2 Name 5',
                              {
                                template: 'status',
                                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                              },
                              'user-name-5',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-2-name-5' },
                              },
                            ],
                          },
                        ],
                      },
                    },
                  },
                  {
                    id: 'child-2-name-5',
                    data: [
                      'Child 2 Name 5',
                      {
                        template: 'status',
                        payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                      },
                      'user-name-5',
                      '18 Dec 2020 2:38 a.m.',
                      {
                        template: 'actions',
                        payload: { id: 'child-2-name-5' },
                      },
                    ],
                    nestedContent: {
                      table: {
                        data: [
                          {
                            id: 'grandchild-3-name-5',
                            data: [
                              'Grand Child 3 Name 5',
                              {
                                template: 'status',
                                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                              },
                              'user-name-5',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-3-name-5' },
                              },
                            ],
                          },
                          {
                            id: 'grandchild-4-name-5',
                            data: [
                              'Grand Child 4 Name 5',
                              {
                                template: 'status',
                                payload: { status: 'Overdue', icon: 'circle-alert', color: 'danger' },
                              },
                              'user-name-5',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-4-name-5' },
                              },
                            ],
                          },
                        ],
                      },
                    },
                  },
                ],
              },
            },
          },
          {
            id: 'name-6',
            data: [
              {
                template: 'name',
                payload: {
                  name: 'Name 6',
                  id: 'name-6',
                },
              },
              {
                template: 'status',
                payload: { status: 'Due', icon: 'warning', color: 'warning' },
              },
              'user-name-6',
              '18 Dec 2020 3:26 p.m.',
              {
                template: 'actions',
                payload: { id: 'name-6' },
              },
            ],
            nestedContent: {
              table: {
                data: [
                  {
                    id: 'child-1-name-6',
                    data: [
                      'Child 1 Name 6',
                      {
                        template: 'status',
                        payload: { status: 'Due', icon: 'warning', color: 'warning' },
                      },
                      'user-name-6',
                      '18 Dec 2020 2:38 a.m.',
                      {
                        template: 'actions',
                        payload: { id: 'child-1-name-6' },
                      },
                    ],
                    nestedContent: {
                      table: {
                        data: [
                          {
                            id: 'grandchild-1-name-6',
                            data: [
                              'Grand Child 1 Name 6',
                              {
                                template: 'status',
                                payload: { status: 'Due', icon: 'warning', color: 'warning' },
                              },
                              'user-name-6',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-1-name-6' },
                              },
                            ],
                          },
                          {
                            id: 'grandchild-2-name-6',
                            data: [
                              'Grand Child 2 Name 6',
                              {
                                template: 'status',
                                payload: { status: 'Due', icon: 'warning', color: 'warning' },
                              },
                              'user-name-6',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-2-name-6' },
                              },
                            ],
                          },
                        ],
                      },
                    },
                  },
                  {
                    id: 'child-2-name-6',
                    data: [
                      'Child 2 Name 6',
                      {
                        template: 'status',
                        payload: { status: 'Due', icon: 'warning', color: 'warning' },
                      },
                      'user-name-6',
                      '18 Dec 2020 2:38 a.m.',
                      {
                        template: 'actions',
                        payload: { id: 'child-2-name-6' },
                      },
                    ],
                    nestedContent: {
                      table: {
                        data: [
                          {
                            id: 'grandchild-3-name-6',
                            data: [
                              'Grand Child 3 Name 6',
                              {
                                template: 'status',
                                payload: { status: 'Due', icon: 'warning', color: 'warning' },
                              },
                              'user-name-6',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-3-name-6' },
                              },
                            ],
                          },
                          {
                            id: 'grandchild-4-name-6',
                            data: [
                              'Grand Child 4 Name 6',
                              {
                                template: 'status',
                                payload: { status: 'Due', icon: 'warning', color: 'warning' },
                              },
                              'user-name-6',
                              '18 Dec 2020 2:38 a.m.',
                              {
                                template: 'actions',
                                payload: { id: 'grandchild-4-name-6' },
                              },
                            ],
                          },
                        ],
                      },
                    },
                  },
                ],
              },
            },
          },
        ],
      },
      codeSnippets: {
        dataTableExample: `<!-- Vue component -->
<ChiDataTable :config="config" :dataTableData="table" ref="dataTableComplex">
  <template #status="payload">
    <i :class="\`chi-icon icon-\${payload.icon} -icon--\${payload.color}\`" aria-hidden="true"></i>
    <span class="-text--truncate" style="padding-left: 0.5rem;">
      {{ payload.status }}
    </span>
  </template>
  <template #name="payload">
    <ExamplePopover :name="payload.name" :id="payload.id" />
  </template>
  <template #actions="payload">
    <ExampleDropdown :id="payload.id" />
  </template>
  <template #toolbar>
    <ChiDataTableToolbar>
      <template v-slot:start></template>
      <template v-slot:end>
        <chi-button @chiClick="printTable" variant="flat" type="icon"
         aria-label="Print data table complex example">
          <chi-icon icon="print"></chi-icon>
        </chi-button>
      </template>
    </ChiDataTableToolbar>
  </template>
  <template #bulk-actions>
    <div class="chi-bulk-actions__buttons">
      <div class="chi-bulk-actions__buttons-mobile -z--40">
        <chi-button variant="flat" type="icon" aria-label="Edit">
          <chi-icon icon="edit"></chi-icon>
        </chi-button>
        <chi-button variant="flat" type="icon" aria-label="Compose">
          <chi-icon icon="compose"></chi-icon>
        </chi-button>
        <chi-button variant="flat" type="icon" aria-label="Delete">
          <chi-icon icon="delete"></chi-icon>
        </chi-button>
        <chi-button variant="flat" type="icon" aria-label="Print">
          <chi-icon icon="print"></chi-icon>
        </chi-button>
      </div>
      <div class="chi-bulk-actions__buttons-desktop">
        <chi-button size="xs" aria-label="Download">
          <chi-icon icon="arrow-to-bottom"></chi-icon>
          <span> Download </span>
        </chi-button>
        <chi-button size="xs" aria-label="Compose">
          <chi-icon icon="arrow-to-bottom"></chi-icon>
          <span> Compose </span>
        </chi-button>
        <chi-button size="xs" aria-label="Delete">
          <chi-icon icon="arrow-to-bottom"></chi-icon>
          <span> Delete </span>
        </chi-button>
        <chi-button size="xs" aria-label="Print">
          <chi-icon icon="arrow-to-bottom"></chi-icon>
          <span> Print </span>
        </chi-button>
      </div>
    </div>
  </template>
</ChiDataTable>

<!-- imports -->
import ExamplePopover from './ExamplePopover.vue';
import ExampleDropdown from './ExampleDropdown.vue';

<!-- Config and Data -->
data: {
  config: {
    columnResize: false,
    selectable: true,
    style: {
      portal: false,
      noBorder: false,
      bordered: false,
      hover: false,
      size: 'md',
      striped: true,
    },
    pagination: {
      activePage: 1,
      compact: false,
      firstLast: true,
      pageJumper: true,
    },
    resultsPerPage: 3,
    defaultSort: {
      key: 'name',
      sortBy: 'string',
      direction: 'ascending',
    },
    showExpandAll: true,
    showSelectAllDropdown: true
  },
  table: {
    head: {
      name: { label: 'Name', sortable: true, sortBy: 'name', sortDataType: 'string', key: true, bold: true },
      status: { label: 'Status', sortable: true, sortBy: 'status', sortDataType: 'string', description: 'Helpful information goes here.' },
      userID: { label: 'User ID', key: true, icon: 'user' },
      lastLogin: { label: 'Last Login', key: true },
      actions: { label: 'Actions', align: 'right', isPrintDisabled: true }
    },
    body: [
      {
        expanded: true,
        id: "name-1",
        data: [
          { template: "name", payload: { name: "Name 1", id: "name-1" } },
          {
            template: "status",
            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
          },
          "user-name-1",
          "18 Dec 2020 3:26 p.m.",
          {
            template: "actions",
            payload: { id: "name-1" },
          },
        ],
        nestedContent: {
          table: {
            data: [
              {
                id: "child-1-name-1",
                data: [
                  "Child 1 Name 1",
                  {
                    template: "status",
                    payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                  },
                  "user-name-1",
                  "18 Dec 2020 2:38 a.m.",
                  {
                    template: "actions",
                    payload: { id: "child-1-name-1" },
                  },
                ],
                nestedContent: {
                  table: {
                    data: [
                      {
                        id: "grandchild-1-name-1",
                        data: [
                          "Grand Child 1 Name 1",
                          {
                            template: "status",
                            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                          },
                          "user-name-1",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-1-name-1" },
                          },
                        ],
                      },
                      {
                        id: "grandchild-2-name-1",
                        data: [
                          "Grand Child 2 Name 1",
                          {
                            template: "status",
                            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                          },
                          "user-name-1",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-2-name-1" },
                          },
                        ],
                      },
                    ],
                  },
                },
              },
              {
                id: "child-2-name-1",
                data: [
                  "Child 2 Name 1",
                  {
                    template: "status",
                    payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                  },
                  "user-name-1",
                  "18 Dec 2020 2:38 a.m.",
                  {
                    template: "actions",
                    payload: { id: "child-2-name-1" },
                  },
                ],
                nestedContent: {
                  table: {
                    data: [
                      {
                        id: "grandchild-3-name-1",
                        data: [
                          "Grand Child 3 Name 1",
                          {
                            template: "status",
                            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                          },
                          "user-name-1",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-3-name-1" },
                          },
                        ],
                      },
                      {
                        id: "grandchild-4-name-1",
                        data: [
                          "Grand Child 4 Name 1",
                          {
                            template: "status",
                            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                          },
                          "user-name-1",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-4-name-1" },
                          },
                        ],
                      },
                    ],
                  },
                },
              },
            ],
          },
        },
      },
      {
        id: "name-2",
        data: [
          { template: "name", payload: { name: "Name 2", id: "name-2" } },
          {
            template: "status",
            payload: { status: "Due", icon: 'warning', color: 'warning' },
          },
          "user-name-2",
          "18 Dec 2020 3:26 p.m.",
          {
            template: "actions",
            payload: { id: "name-2" },
          },
        ],
        nestedContent: {
          table: {
            data: [
              {
                id: "child-1-name-2",
                data: [
                  "Child 1 Name 2",
                  {
                    template: "status",
                    payload: { status: "Due", icon: 'warning', color: 'warning' },
                  },
                  "user-name-2",
                  "18 Dec 2020 2:38 a.m.",
                  {
                    template: "actions",
                    payload: { id: "child-1-name-2" },
                  },
                ],
                nestedContent: {
                  table: {
                    data: [
                      {
                        id: "grandchild-1-name-2",
                        data: [
                          "Grand Child 1 Name 2",
                          {
                            template: "status",
                            payload: { status: "Due", icon: 'warning', color: 'warning' },
                          },
                          "user-name-2",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-1-name-2" },
                          },
                        ],
                      },
                      {
                        id: "grandchild-2-name-2",
                        data: [
                          "Grand Child 2 Name 2",
                          {
                            template: "status",
                            payload: { status: "Due", icon: 'warning', color: 'warning' },
                          },
                          "user-name-2",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-2-name-2" },
                          },
                        ],
                      },
                    ],
                  },
                },
              },
              {
                id: "child-2-name-2",
                data: [
                  "Child 2 Name 2",
                  {
                    template: "status",
                    payload: { status: "Due", icon: 'warning', color: 'warning' },
                  },
                  "user-name-2",
                  "18 Dec 2020 2:38 a.m.",
                  {
                    template: "actions",
                    payload: { id: "child-2-name-2" },
                  },
                ],
                nestedContent: {
                  table: {
                    data: [
                      {
                        id: "grandchild-3-name-2",
                        data: [
                          "Grand Child 3 Name 2",
                          {
                            template: "status",
                            payload: { status: "Due", icon: 'warning', color: 'warning' },
                          },
                          "user-name-2",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-3-name-2" },
                          },
                        ],
                      },
                      {
                        id: "grandchild-4-name-2",
                        data: [
                          "Grand Child 4 Name 2",
                          {
                            template: "status",
                            payload: { status: "Due", icon: 'warning', color: 'warning' },
                          },
                          "user-name-2",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-4-name-2" },
                          },
                        ],
                      },
                    ],
                  },
                },
              },
            ],
          },
        },
      },
      {
        id: "name-3",
        data: [
          {
            template: "name",
            payload: {
              name: "Name 3",
              id: "name-3",
            },
          },
          {
            template: "status",
            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
          },
          "user-name-3",
          "18 Dec 2020 3:26 p.m.",
          {
            template: "actions",
            payload: { id: "name-3" },
          },
        ],
        nestedContent: {
          table: {
            data: [
              {
                id: "child-1-name-3",
                data: [
                  "Child 1 Name 3",
                  {
                    template: "status",
                    payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                  },
                  "user-name-3",
                  "18 Dec 2020 2:38 a.m.",
                  {
                    template: "actions",
                    payload: { id: "child-1-name-3" },
                  },
                ],
                nestedContent: {
                  table: {
                    data: [
                      {
                        id: "grandchild-1-name-3",
                        data: [
                          "Grand Child 1 Name 3",
                          {
                            template: "status",
                            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                          },
                          "user-name-3",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-1-name-3" },
                          },
                        ],
                      },
                      {
                        id: "grandchild-2-name-3",
                        data: [
                          "Grand Child 2 Name 3",
                          {
                            template: "status",
                            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                          },
                          "user-name-3",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-2-name-3" },
                          },
                        ],
                      },
                    ],
                  },
                },
              },
              {
                id: "child-2-name-3",
                data: [
                  "Child 2 Name 3",
                  {
                    template: "status",
                    payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                  },
                  "user-name-3",
                  "18 Dec 2020 2:38 a.m.",
                  {
                    template: "actions",
                    payload: { id: "child-2-name-3" },
                  },
                ],
                nestedContent: {
                  table: {
                    data: [
                      {
                        id: "grandchild-3-name-3",
                        data: [
                          "Grand Child 3 Name 3",
                          {
                            template: "status",
                            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                          },
                          "user-name-3",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-3-name-3" },
                          },
                        ],
                      },
                      {
                        id: "grandchild-4-name-3",
                        data: [
                          "Grand Child 4 Name 3",
                          {
                            template: "status",
                            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                          },
                          "user-name-3",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-4-name-3" },
                          },
                        ],
                      },
                    ],
                  },
                },
              },
            ],
          },
        },
      },
      {
        id: "name-4",
        data: [
          {
            template: "name",
            payload: {
              name: "Name 4",
              id: "name-4",
            },
          },
          {
            template: "status",
            payload: { status: "Due", icon: 'warning', color: 'warning' },
          },
          "user-name-4",
          "18 Dec 2020 3:26 p.m.",
          {
            template: "actions",
            payload: { id: "name-4" },
          },
        ],
        nestedContent: {
          table: {
            data: [
              {
                id: "child-1-name-4",
                data: [
                  "Child 1 Name 4",
                  {
                    template: "status",
                    payload: { status: "Due", icon: 'warning', color: 'warning' },
                  },
                  "user-name-4",
                  "18 Dec 2020 2:38 a.m.",
                  {
                    template: "actions",
                    payload: { id: "child-1-name-4" },
                  },
                ],
                nestedContent: {
                  table: {
                    data: [
                      {
                        id: "grandchild-1-name-4",
                        data: [
                          "Grand Child 1 Name 4",
                          {
                            template: "status",
                            payload: { status: "Due", icon: 'warning', color: 'warning' },
                          },
                          "user-name-4",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-1-name-4" },
                          },
                        ],
                      },
                      {
                        id: "grandchild-2-name-4",
                        data: [
                          "Grand Child 2 Name 4",
                          {
                            template: "status",
                            payload: { status: "Due", icon: 'warning', color: 'warning' },
                          },
                          "user-name-4",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-2-name-4" },
                          },
                        ],
                      },
                    ],
                  },
                },
              },
              {
                id: "child-2-name-4",
                data: [
                  "Child 2 Name 4",
                  {
                    template: "status",
                    payload: { status: "Due", icon: 'warning', color: 'warning' },
                  },
                  "user-name-4",
                  "18 Dec 2020 2:38 a.m.",
                  {
                    template: "actions",
                    payload: { id: "child-2-name-4" },
                  },
                ],
                nestedContent: {
                  table: {
                    data: [
                      {
                        id: "grandchild-3-name-4",
                        data: [
                          "Grand Child 3 Name 4",
                          {
                            template: "status",
                            payload: { status: "Due", icon: 'warning', color: 'warning' },
                          },
                          "user-name-4",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-3-name-4" },
                          },
                        ],
                      },
                      {
                        id: "grandchild-4-name-4",
                        data: [
                          "Grand Child 4 Name 4",
                          {
                            template: "status",
                            payload: { status: "Due", icon: 'warning', color: 'warning' },
                          },
                          "user-name-4",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-4-name-4" },
                          },
                        ],
                      },
                    ],
                  },
                },
              },
            ],
          },
        },
      },
      {
        id: "name-5",
        data: [
          {
            template: "name",
            payload: {
              name: "Name 5",
              id: "name-5",
            },
          },
          {
            template: "status",
            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
          },
          "user-name-5",
          "18 Dec 2020 3:26 p.m.",
          {
            template: "actions",
            payload: { id: "name-5" },
          },
        ],
        nestedContent: {
          table: {
            data: [
              {
                id: "child-1-name-5",
                data: [
                  "Child 1 Name 5",
                  {
                    template: "status",
                    payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                  },
                  "user-name-5",
                  "18 Dec 2020 2:38 a.m.",
                  {
                    template: "actions",
                    payload: { id: "child-1-name-5" },
                  },
                ],
                nestedContent: {
                  table: {
                    data: [
                      {
                        id: "grandchild-1-name-5",
                        data: [
                          "Grand Child 1 Name 5",
                          {
                            template: "status",
                            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                          },
                          "user-name-5",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-1-name-5" },
                          },
                        ],
                      },
                      {
                        id: "grandchild-2-name-5",
                        data: [
                          "Grand Child 2 Name 5",
                          {
                            template: "status",
                            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                          },
                          "user-name-5",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-2-name-5" },
                          },
                        ],
                      },
                    ],
                  },
                },
              },
              {
                id: "child-2-name-5",
                data: [
                  "Child 2 Name 5",
                  {
                    template: "status",
                    payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                  },
                  "user-name-5",
                  "18 Dec 2020 2:38 a.m.",
                  {
                    template: "actions",
                    payload: { id: "child-2-name-5" },
                  },
                ],
                nestedContent: {
                  table: {
                    data: [
                      {
                        id: "grandchild-3-name-5",
                        data: [
                          "Grand Child 3 Name 5",
                          {
                            template: "status",
                            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                          },
                          "user-name-5",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-3-name-5" },
                          },
                        ],
                      },
                      {
                        id: "grandchild-4-name-5",
                        data: [
                          "Grand Child 4 Name 5",
                          {
                            template: "status",
                            payload: { status: "Overdue", icon: "circle-alert", color: "danger" },
                          },
                          "user-name-5",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-4-name-5" },
                          },
                        ],
                      },
                    ],
                  },
                },
              },
            ],
          },
        },
      },
      {
        id: "name-6",
        data: [
          {
            template: "name",
            payload: {
              name: "Name 6",
              id: "name-6",
            },
          },
          {
            template: "status",
            payload: { status: "Due", icon: 'warning', color: 'warning' },
          },
          "user-name-6",
          "18 Dec 2020 3:26 p.m.",
          {
            template: "actions",
            payload: { id: "name-6" },
          },
        ],
        nestedContent: {
          table: {
            data: [
              {
                id: "child-1-name-6",
                data: [
                  "Child 1 Name 6",
                  {
                    template: "status",
                    payload: { status: "Due", icon: 'warning', color: 'warning' },
                  },
                  "user-name-6",
                  "18 Dec 2020 2:38 a.m.",
                  {
                    template: "actions",
                    payload: { id: "child-1-name-6" },
                  },
                ],
                nestedContent: {
                  table: {
                    data: [
                      {
                        id: "grandchild-1-name-6",
                        data: [
                          "Grand Child 1 Name 6",
                          {
                            template: "status",
                            payload: { status: "Due", icon: 'warning', color: 'warning' },
                          },
                          "user-name-6",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-1-name-6" },
                          },
                        ],
                      },
                      {
                        id: "grandchild-2-name-6",
                        data: [
                          "Grand Child 2 Name 6",
                          {
                            template: "status",
                            payload: { status: "Due", icon: 'warning', color: 'warning' },
                          },
                          "user-name-6",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-2-name-6" },
                          },
                        ],
                      },
                    ],
                  },
                },
              },
              {
                id: "child-2-name-6",
                data: [
                  "Child 2 Name 6",
                  {
                    template: "status",
                    payload: { status: "Due", icon: 'warning', color: 'warning' },
                  },
                  "user-name-6",
                  "18 Dec 2020 2:38 a.m.",
                  {
                    template: "actions",
                    payload: { id: "child-2-name-6" },
                  },
                ],
                nestedContent: {
                  table: {
                    data: [
                      {
                        id: "grandchild-3-name-6",
                        data: [
                          "Grand Child 3 Name 6",
                          {
                            template: "status",
                            payload: { status: "Due", icon: 'warning', color: 'warning' },
                          },
                          "user-name-6",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-3-name-6" },
                          },
                        ],
                      },
                      {
                        id: "grandchild-4-name-6",
                        data: [
                          "Grand Child 4 Name 6",
                          {
                            template: "status",
                            payload: { status: "Due", icon: 'warning', color: 'warning' },
                          },
                          "user-name-6",
                          "18 Dec 2020 2:38 a.m.",
                          {
                            template: "actions",
                            payload: { id: "grandchild-4-name-6" },
                          },
                        ],
                      },
                    ],
                  },
                },
              },
            ],
          },
        },
      },
    ],
  },
},
methods: {
  printTable() {
    this.$refs.dataTableComplex.print('Data table - Complex')
  }
}`,
        popoverExample: `<!-- Template -->
<template>
  <div class="-text--truncate">
    <a
      :id="\`name-popover-button-\${id}\`"
      href="#"
      :data-target="\`#name-popover-\${id}\`"
      position="top-start">
      {{id}}
    </a>
    <section
      class="chi-popover"
      :id="\`name-popover-\${id}\`"
      aria-modal="true"
      role="dialog"
      :aria-label="name"
    >
      <div class="chi-popover__content">
        {{ name }}
      </div>
    </section>
  </div>
</template>

<!-- Mounted -->
mounted() {
  let hoverAnimationTimeout: ReturnType<typeof setTimeout> | undefined;;
  const buttonOpenOnHover = document.getElementById(\`ticket-popover-button-\${this.$props.id}\`);
  const popover = chi.popover(buttonOpenOnHover);

  if (buttonOpenOnHover) {
    buttonOpenOnHover.addEventListener('mouseenter', function() {
      hoverAnimationTimeout = setTimeout(() => {
        popover.show();
      }, 300);
    });

    buttonOpenOnHover.addEventListener('mouseleave', function() {
      if (hoverAnimationTimeout) {
        clearTimeout(hoverAnimationTimeout);
      }
      popover.hide();
    });
  }
}
beforeDestroy() {
  this.popover.dispose();
}`,
        dropdownExample: `<!-- Template -->
<template>
  <div class="chi-dropdown -position--absolute">
    <button
      :id="'action-button-' + id"
      class="chi-button -icon -primary -flat"
      aria-label="More options"
      data-position="left-start"
    >
      <div class="chi-button__content">
        <i class="chi-icon icon-more-vert" aria-hidden="true"></i>
      </div>
    </button>
    <div class="chi-dropdown__menu">
      <a class="chi-dropdown__menu-item" href="#" v-for="action in actions">
        <span><chi-icon :icon="action.icon" size="sm" color="primary"></chi-icon></span>
        <span>{{ action.name }}</span>
      </a>
    </div>
  </div>
</template>

<!-- Config and data -->
data: {
  actions: [
    {name: 'View', icon: 'check-alt'},
    {name: 'Edit', icon: 'edit'},
    {name: 'Delete', icon: 'delete'}
  ]
}

<!-- mounted -->
mounted() {
  this.dropdown = chi.dropdown(document.getElementById(\`action-button-\${this.id}\`));
}
beforeDestroy() {
  this.dropdown.dispose();
}`,
      },
    };
  },
})
export default class DataTableComplex extends Vue {}
</script>
