extends ../layout.pug

block scripts
  script(type="module" src='../../../js/ce/ux-chi-ce/ux-chi-ce.esm.js')
  script(src='../../../js/chi.js')

block variables
  - var title = 'Textarea'
  - var styles = ['default', 'success', 'warning', 'danger']
  - var states = ['initial', 'hover', 'focus', 'disabled', 'readonly']
  - var sizes = ['default', 'xs', 'sm', 'md', 'lg', 'xl']
  - var _sizes = ['xs', 'sm', 'md', 'lg', 'xl']

block content
  each size in sizes
    div(class=`test-${size}`)
      span.-text--h2= `Textarea / ${size}`
      table(cellpadding="0", cellspacing="0", width="1200px")
        each state in states
          tr
            td
              small= `${state}`
            each style in styles
              td(style='vertical-align: bottom')
                .-m--1
                  if state == 'disabled'
                    chi-textarea(
                      size= size == 'default' ? '' : size,
                      disabled,
                      state= style == 'default' ? '' : style,
                      _status= state == 'initial' ? '' : state
                      ) Value
                  else if state == 'readonly'
                    chi-textarea(
                      size= size == 'default' ? '' : size,
                      readonly,
                      state= style == 'default' ? '' : style,
                      _status= state == 'initial' ? '' : state
                      ) Value
                  else
                    chi-textarea(
                      size= size == 'default' ? '' : size,
                      state= style == 'default' ? '' : style,
                      _status= state == 'initial' ? '' : state
                    ) Value
              td(style='vertical-align: bottom')
                .-m--1
                  if state == 'disabled'
                    .chi-form__item
                      chi-label(size=size == 'default' ? 'md' : size) Label
                      chi-textarea(
                        size= size == 'default' ? '' : size,
                        disabled,
                        state= style == 'default' ? '' : style,
                        _status= state == 'initial' ? '' : state
                      ) Value
                  else if state == 'readonly'
                    .chi-form__item
                      chi-label(size=size == 'default' ? 'md' : size) Label
                      chi-textarea(
                        size= size == 'default' ? '' : size,
                        readonly,
                        state= style == 'default' ? '' : style,
                        _status= state == 'initial' ? '' : state
                      ) Value
                  else
                    .chi-form__item
                      chi-label(size=size == 'default' ? 'md' : size) Label
                      chi-textarea(
                        size= size == 'default' ? '' : size,
                        state= style == 'default' ? '' : style,
                        _status= state == 'initial' ? '' : state
                      ) Value

    div(class=`test-${size}-icon-left`)
      span.-text--h2= `Textarea / ${size} / icon left`
      table(cellpadding="0", cellspacing="0", width="1200px")
        each state in states
          tr
            td
              small= `${state}`
            each style in styles
              td(style='vertical-align: bottom')
                .-m--1
                  if state == 'disabled'
                    chi-textarea(
                      size= size == 'default' ? '' : size,
                      disabled,
                      state= style == 'default' ? '' : style,
                      _status= state == 'initial' ? '' : state,
                      icon-left="atom"
                    ) Value
                  else
                    chi-textarea(
                      size= size == 'default' ? '' : size,
                      state= style == 'default' ? '' : style,
                      _status= state == 'initial' ? '' : state,
                      icon-left="atom"
                    ) Value
              td(style='vertical-align: bottom')
                .-m--1
                  .chi-form__item
                    chi-label(size=size) Label
                    if state == 'disabled'
                      chi-textarea(
                        size= size == 'default' ? '' : size,
                        disabled,
                        state= style == 'default' ? '' : style,
                        _status= state == 'initial' ? '' : state,
                        icon-left="atom"
                      ) Value
                    else
                      chi-textarea(
                        size= size == 'default' ? '' : size,
                        state= style == 'default' ? '' : style,
                        _status= state == 'initial' ? '' : state,
                        icon-left="atom"
                      ) Value

    div(class=`test-${size}-icon-right`)
      span.-text--h2= `Textarea / ${size} / icon right`
      table(cellpadding="0", cellspacing="0", width="1200px")
        each state in states
          tr
            td
              small= `${state}`
            each style in styles
              td(style='vertical-align: bottom')
                .-m--1
                  if style == 'success'
                    - var icon = 'check'
                  else if style == 'warning'
                    - var icon = 'warning'
                  else if style == 'danger'
                    - var icon = 'circle-warning'
                  else
                    - var icon = 'circle-info-outline'
                  if state == 'disabled'
                    chi-textarea(
                      size= size == 'default' ? '' : size,
                      disabled,
                      state= style == 'default' ? '' : style,
                      _status= state == 'initial' ? '' : state,
                      icon-right=icon,
                      icon-right-color= style == 'default' ? '' : style
                    ) Value
                  else
                    chi-textarea(
                      size= size == 'default' ? '' : size,
                      state= style == 'default' ? '' : style,
                      _status= state == 'initial' ? '' : state,
                      icon-right=icon,
                      icon-right-color= style == 'default' ? '' : style
                    ) Value

              td(style='vertical-align: bottom')
                .-m--1
                  .chi-form__item
                    chi-label(size=size for='example') Label
                    if style == 'success'
                      - var icon = 'check'
                    else if style == 'warning'
                      - var icon = 'warning'
                    else if style == 'danger'
                      - var icon = 'circle-warning'
                    else
                      - var icon = 'circle-info-outline'
                    if state == 'disabled'
                      chi-textarea(
                        size= size == 'default' ? '' : size,
                        disabled,
                        state= style == 'default' ? '' : style,
                        _status= state == 'initial' ? '' : state,
                        icon-right=icon,
                        icon-right-color= style == 'default' ? '' : style
                      ) Value
                    else
                      chi-textarea(
                        size= size == 'default' ? '' : size,
                        state= style == 'default' ? '' : style,
                        _status= state == 'initial' ? '' : state,
                        icon-right=icon,
                        icon-right-color= style == 'default' ? '' : style
                      ) Value

    div(class=`test-${size}-icon-left-right`)
      span.-text--h2= `Textarea / ${size} / icon left / icon right`
      table(cellpadding="0", cellspacing="0", width="1200px")
        each state in states
          tr
            td
              small= `${state}`
            each style in styles
              td(style='vertical-align: bottom')
                .-m--1
                  if style == 'success'
                    - var icon = 'check'
                  else if style == 'warning'
                    - var icon = 'warning'
                  else if style == 'danger'
                    - var icon = 'circle-warning'
                  else
                    - var icon = 'circle-info-outline'
                  if state == 'disabled'
                    chi-textarea(
                      size= size == 'default' ? '' : size,
                      disabled,
                      state= style == 'default' ? '' : style,
                      _status= state == 'initial' ? '' : state,
                      icon-left="atom",
                      icon-right=icon,
                      icon-right-color= style == 'default' ? '' : style
                    ) Value
                  else
                    chi-textarea(
                      size= size == 'default' ? '' : size,
                      state= style == 'default' ? '' : style,
                      _status= state == 'initial' ? '' : state,
                      icon-left="atom",
                      icon-right=icon,
                      icon-right-color= style == 'default' ? '' : style
                    ) Value
              td(style='vertical-align: bottom')
                .-m--1
                  .chi-form__item
                    chi-label(size=size for='example') Label
                    if style == 'success'
                      - var icon = 'check'
                    else if style == 'warning'
                      - var icon = 'warning'
                    else if style == 'danger'
                      - var icon = 'circle-warning'
                    else
                      - var icon = 'circle-info-outline'
                    if state == 'disabled'
                      chi-textarea(
                        size= size == 'default' ? '' : size,
                        disabled,
                        state= style == 'default' ? '' : style,
                        _status= state == 'initial' ? '' : state,
                        icon-left="atom",
                        icon-right=icon,
                        icon-right-color= style == 'default' ? '' : style
                      ) Value
                    else
                      chi-textarea(
                        size= size == 'default' ? '' : size,
                        state= style == 'default' ? '' : style,
                        _status= state == 'initial' ? '' : state,
                        icon-left="atom",
                        icon-right=icon,
                        icon-right-color= style == 'default' ? '' : style
                      ) Value

    div(class=`test-${size}-helper-message`)
      span.-text--h2=`Textarea / Helper Message / ${size}`
      table(cellpadding="0" cellspacing="0" width="480px")
        each style in styles
          tr
            td
              small= `${style}`
            td
              .-m--1
                    chi-textarea(
                      size= size == 'default' ? '' : size,
                      state= style == 'default' ? '' : style,
                      helper-message="Optional helper message"
                    ) Value

  each size in _sizes
    div(class=`test-copy-text-button-${size}`)
      span.-text--h2=`Textarea / Copy text button / ${size}`
      table(cellpadding="0" cellspacing="0" width="2500px")
        each state in styles
          tr
            td
              small= `${state}`
            td
              .-m--3
                chi-textarea(
                  size= size, 
                  state= state != 'default' && state, 
                  value="Some text",
                  copy-text
                )
            td
              .-m--3
                chi-textarea(
                  size= size, 
                  state= state != 'default' && state, 
                  icon-right="search",
                  value="Some text",
                  copy-text
                )
            td
              .-m--3
                chi-textarea(
                  size= size, 
                  state= state != 'default' && state, 
                  icon-left="atom",
                  value="Some text",
                  copy-text
                )
            td
              .-m--3
                chi-textarea(
                  size= size, 
                  state= state != 'default' && state, 
                  disabled,
                  value="Some text",
                  copy-text
                )
            td
              .-m--3
                chi-textarea(
                  size= size, 
                  state= state != 'default' && state, 
                  helper-message="Optional helper message",
                  value="Some text",
                  copy-text
                )
            td
              .-m--3
                chi-textarea(
                  size= size, 
                  state= state != 'default' && state, 
                  icon-left="atom",
                  icon-right="search",
                  helper-message="Optional helper message",
                  value="Some text",
                  copy-text,
                  readonly
                )



  script.
    function checkAllTextareasRendered() {
      const textareas = document.querySelectorAll('chi-textarea');

      return Array.from(textareas).every(x => x.classList.contains('hydrated'));
    }

    const renderCheckInterval = setInterval(function() {
      if (checkAllTextareasRendered()) {
        console.log("backstop_ready");
        clearInterval(renderCheckInterval);
      }
    }, 3000);
